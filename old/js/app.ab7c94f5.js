(function(e){function t(t){for(var r,a,i=t[0],u=t[1],l=t[2],d=0,f=[];d<i.length;d++)a=i[d],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&f.push(o[a][0]),o[a]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);s&&s(t);while(f.length)f.shift()();return c.push.apply(c,l||[]),n()}function n(){for(var e,t=0;t<c.length;t++){for(var n=c[t],r=!0,i=1;i<n.length;i++){var u=n[i];0!==o[u]&&(r=!1)}r&&(c.splice(t--,1),e=a(a.s=n[0]))}return e}var r={},o={app:0},c=[];function a(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=r,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],u=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var s=u;c.push([1,"chunk-vendors"]),n()})({0:function(e,t){},1:function(e,t,n){e.exports=n("cd49")},10:function(e,t){},11:function(e,t){},12:function(e,t){},13:function(e,t){},14:function(e,t){},15:function(e,t){},16:function(e,t){},"16b5":function(e,t,n){"use strict";n("3f20")},17:function(e,t){},18:function(e,t){},"1a12":function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="1a12"},"1c26":function(e,t,n){var r={"./build":"f885","./build.js":"f885","./clean":"f83a","./clean.js":"f83a","./configure":"8f0e","./configure.js":"8f0e","./info":"53b3","./info.js":"53b3","./install":"3b09","./install.js":"3b09","./node-pre-gyp":"95bb","./node-pre-gyp.js":"95bb","./package":"42e9","./package.js":"42e9","./pre-binding":"c2bf","./pre-binding.js":"c2bf","./publish":"96ac","./publish.js":"96ac","./rebuild":"efb3","./rebuild.js":"efb3","./reinstall":"39b2","./reinstall.js":"39b2","./reveal":"4997","./reveal.js":"4997","./testbinary":"5c9e","./testbinary.js":"5c9e","./testpackage":"4791","./testpackage.js":"4791","./unpublish":"012f","./unpublish.js":"012f","./util/abi_crosswalk":"63e9","./util/abi_crosswalk.json":"63e9","./util/compile":"99ca","./util/compile.js":"99ca","./util/handle_gyp_opts":"b608","./util/handle_gyp_opts.js":"b608","./util/napi":"3d34","./util/napi.js":"3d34","./util/nw-pre-gyp/index.html":"a716","./util/nw-pre-gyp/package":"4ca4","./util/nw-pre-gyp/package.json":"4ca4","./util/s3_setup":"606e","./util/s3_setup.js":"606e","./util/versioning":"f3dc","./util/versioning.js":"f3dc"};function o(e){var t=c(e);return n(t)}function c(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=c,e.exports=o,o.id="1c26"},2:function(e,t){},"254e":function(e,t,n){"use strict";n("ff2a")},3:function(e,t){},3149:function(e,t,n){},"3f20":function(e,t,n){},4:function(e,t){},"4a26":function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="4a26"},5:function(e,t){},5893:function(e,t,n){var r={"./en-US.ts":"f197","./zh-CN.ts":"a8b7"};function o(e){var t=c(e);return n(t)}function c(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=c,e.exports=o,o.id="5893"},"5b9d":function(e,t,n){var r={"./Find-VS2017.cs":"c3f6","./build":"c22b","./build.js":"c22b","./clean":"1910","./clean.js":"1910","./configure":"c0a3","./configure.js":"c0a3","./find-node-directory":"3265","./find-node-directory.js":"3265","./find-vs2017":"d3f3","./find-vs2017.js":"d3f3","./install":"1eed","./install.js":"1eed","./list":"7777","./list.js":"7777","./node-gyp":"a9a0","./node-gyp.js":"a9a0","./process-release":"4e82","./process-release.js":"4e82","./rebuild":"626c","./rebuild.js":"626c","./remove":"bcf9","./remove.js":"bcf9"};function o(e){var t=c(e);return n(t)}function c(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=c,e.exports=o,o.id="5b9d"},6:function(e,t){},"623a":function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="623a"},6278:function(e,t,n){},7:function(e,t){},"7d07":function(e,t,n){"use strict";n("3149")},8:function(e,t){},"86b0":function(e,t,n){},9:function(e,t){},9536:function(e,t,n){},"9bbd":function(e,t,n){"use strict";n("f76e")},a596:function(e,t,n){e.exports=n.p+"img/qrcode.3f46061c.png"},a8b7:function(e,t,n){"use strict";n.r(t),t["default"]={parse:"解析","how-export":"如何导出 HTML？","questions-and-answers":"常见问题解答",weread:"微信读书","parse-options":"解析设置","hide-tag":"隐藏 Tag","position-of-tag":"位置",top:"顶部",bottom:"底部",on:"启用",off:"禁用","book-name":"书名","book-list":"书籍列表",import:"导入","api-options":"Api 设置","tag-options":"Tag 设置","notes-options":"笔记设置","reading-notes":"正在读取","upload-file":"上传 HTML/TXT/JSON 文件",thanks:"感谢 lupeng",all:"全选","not-all":"全不选","check-update":"检查更新",blog:"博客",jike:"即刻",help:"帮助",save:"保 存",cancel:"取 消"}},c19a:function(e,t,n){"use strict";n("6278")},c7b3:function(e,t,n){n("a15b");var r=n("fc0d").verbose(),o=n("df7c"),c=function(e,t){return new r.Database(o.join(e,t))};e.exports={db:c}},c8a0:function(e,t,n){"use strict";n("86b0")},cd49:function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("7a23"),o=n("1da1"),c=(n("96cf"),n("99af"),n("47e2")),a={class:"the-head"},i=Object(r["defineComponent"])({setup:function(e){var t=Object(c["b"])();t.t,t.locale,Object(r["ref"])(!1);return function(e,t){return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",a)}}}),u=(n("254e"),n("6b0d")),l=n.n(u);const s=l()(i,[["__scopeId","data-v-449b818b"]]);var d=s,f=n("5530"),b=(n("7db0"),n("ac1f"),n("1276"),n("b0c0"),n("d3b7"),n("3ca3"),n("ddb0"),n("d81d"),n("5319"),n("498a"),n("a630"),n("a15b"),n("4de4"),n("6821")),p=n.n(b),O=n("53ca"),m=(n("159b"),n("c740"),n("caad"),n("2532"),n("4dec"));function j(){var e=new m["a"]("booknotes");return e.version(1).stores({notes:"++id, uuid, title",books:"++id, uuid, title"}),e}var h=j();function v(e){return x.apply(this,arguments)}function x(){return x=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n,r,o=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:"notes",e.next=3,h[n].where("uuid").equals(t).toArray();case 3:return r=e.sent,e.abrupt("return",r?r[0]:null);case 5:case"end":return e.stop()}}),e)}))),x.apply(this,arguments)}function g(){return k.apply(this,arguments)}function k(){return k=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:"notes",e.next=3,h[t].reverse().toArray();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),k.apply(this,arguments)}function w(e){return N.apply(this,arguments)}function N(){return N=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n,r=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:"notes",e.next=3,h[n].where("title").equals(t).toArray();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),N.apply(this,arguments)}function V(e){return y.apply(this,arguments)}function y(){return y=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n,r=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]?r[1]:"notes",!(t instanceof Array)){e.next=5;break}return e.next=4,h[n].bulkAdd(t);case 4:return e.abrupt("return",e.sent);case 5:return e.next=7,h[n].add(t);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)}))),y.apply(this,arguments)}function T(e){return E.apply(this,arguments)}function E(){return E=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n,r=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:"notes",e.next=3,h[n].put(t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),E.apply(this,arguments)}n("a434");var C=n("ade3"),_=n("5502");function S(e,t,n){var r=e.noTag,o=e.tagPosition,c=e.noEmptyLine,a=n;return r||(o?a="".concat(t,c?"\r\n":"\r\n\r\n")+a:a+=c?t:"\r\n".concat(t)),a}function L(e,t,n){var r=e.split,o=(e.tagPosition,e.notePosition),c=e.noEmptyLine,a=(e.noTag,JSON.parse(JSON.stringify(t)).map((function(t){var a="".concat(t.text,"\r\n"),i=t.note?"".concat(r).concat(r||c?"\r\n":""):"",u=t.note?[a,i,"".concat(t.note,"\r\n")]:[a,i];o&&u.reverse();var l=u.filter((function(e){return e})).join(c?"":"\r\n"),s=S(e,n,l);return t.content=t.content_update||s,t.content_temp=t.content_update||s,t})));return a}function A(){var e=new Date,t=e.getFullYear(),n=e.getMonth()+1,r=e.getDate();return"".concat(t).concat(n).concat(r)}var D=A(),R=Object(_["a"])({state:function(){return{importCount:0,textList:[],tempList:[],bookList:[],parseOptions:null}},mutations:{UPDATE_BOOK:function(e,t){var n=e.bookList.find((function(e){return e.title===t.title}));n.book=t.book},SORT_BOOK_LIST:function(e,t){if(t instanceof Array)for(var n=function(n){var r=t[n],o=e.bookList.findIndex((function(e){return e.title===r}));e.bookList.unshift(e.bookList.splice(o,1)[0])},r=0;r<t.length;r++)n(r);else{var o=e.bookList.findIndex((function(e){return e.title===t}));e.bookList.unshift(e.bookList.splice(o,1)[0])}},SET_BOOK_LIST:function(e,t){e.bookList=t;var n=t.map((function(e){return e.title}));localStorage.setItem("bookSort",JSON.stringify(n))},UPDATE_PARSE_OPTIONS:function(e,t){e.parseOptions=t},UPDATE_TEXT_LIST:function(e,t){var n=e.parseOptions,r=e.bookList;if(!r.length||!n)return[];var o=n.options,c=r.find((function(e){return e.title===o.title}));if(c&&c.texts){var a=c.texts.findIndex((function(e){return e.uuid===t.uuid}));a>=0&&(c.texts[a]=Object(f["a"])(Object(f["a"])({},c.texts[a]),t))}},SET_IMPORT_COUNT:function(e,t){e.importCount=t,localStorage.setItem("importCount",JSON.stringify(Object(C["a"])({},D,t)))},SELECT_ALL:function(e,t){var n=e.parseOptions,r=e.bookList,o=r.find((function(e){return e.title===n.options.title}));o.texts.forEach((function(e){e.checked=t}))},GET_IMPORT_COUNT:function(e){var t=JSON.parse(localStorage.getItem("importCount")||"{}");e.importCount=+t[D]||0}},getters:{textList:function(e){var t=e.parseOptions,n=e.bookList,r=void 0===n?[]:n;if(!r.length||!t)return[];var o=t.options,c=t.tag,a=r.find((function(e){return e.title===o.title}));return a?L(o,a.texts,c):[]},bookList:function(e){return e.bookList},selectedList:function(e,t){return t.textList.filter((function(e){return e.checked}))},importDisabled:function(e,t){return t.selectedList.length>=100},importCount:function(e){return e.importCount},isElectron:function(){return!!Object({NODE_ENV:"production",BASE_URL:""}).IS_ELECTRON},parseOptions:function(e){return e.parseOptions}}}),B=R,I=B.getters.isElectron,U={};function P(e){if(!e)return!1;I&&U.openExternal(e)}function M(e){return e.map((function(e){return Object(f["a"])(Object(f["a"])({},e),{},{checked:!1,content:"",content_temp:""})}))}function q(e){var t=Object(f["a"])({},Object(r["toRaw"])(e));return delete t.checked,delete t.content,delete t.content_temp,t}function F(){return z.apply(this,arguments)}function z(){return z=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n,r,o,c,a,i,u,l,s=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:[],n=!(s.length>1&&void 0!==s[1])||s[1],e.next=4,g("books");case 4:r=e.sent,o=[],c=0;case 7:if(!(c<r.length)){e.next=16;break}return a=r[c],e.next=11,w(a.title);case 11:i=e.sent,o.push(Object(f["a"])(Object(f["a"])({},a),{},{texts:M(i)}));case 13:c++,e.next=7;break;case 16:if(n&&t.length)for(u=function(e){var n=t[e],r=o.findIndex((function(e){return e.title===n}));o.unshift(o.splice(r,1)[0])},l=0;l<t.length;l++)u(l);return B.commit("SET_BOOK_LIST",o),e.abrupt("return",o);case 19:case"end":return e.stop()}}),e)}))),z.apply(this,arguments)}I&&(U=n("daba").shell,n("bdb9").ipcRenderer);var J=F;function H(e){var t=Object(O["a"])(e);return"function"===t||"object"===t&&!!e}function K(e){if(!H(e))return e;for(var t,n,r=1,o=arguments.length;r<o;r++)for(n in t=arguments[r],t)e[n]=t[n];return e}function Z(e){return-1!==e.indexOf("标注")||-1!==e.indexOf("Highlight")?1:(-1!==e.indexOf("笔记")||-1!==e.indexOf("备注")||-1!==e.indexOf("书签")||e.indexOf("Bookmark"),2)}var X={split_created:function(e){e=e.split("|").map((function(e){return e.trim()}));try{var t=e[0].substr(2),n=t.replace(/[^0-9]/gi,""),r=Z(t);return{type:r,position:1===r?t:n,note:""}}catch(o){return{note:"",position:"",date:""}}},split_book:function(e){e=e.replace(/（/g,"(").replace(/）/g,")");try{var t=/(.+)\((.+)\)/,n=t.exec(e);return n?{book:n[1].trim(),author:n[2].trim()}:{book:e,author:""}}catch(r){console.log(r)}}};function W(e){this.position="",this.book="",this.author="",this.date=null,this.content="",this.texts=e,this.type="",this.init()}function G(e){return Y.apply(this,arguments)}function Y(){return Y=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n,r,o,c,a,i,u,l,s,d,f,b,O,m;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=t.split("==========").filter((function(e){return e})),n=[],r=[],t.map(Q).forEach((function(e){e&&(1===e.type&&e.content&&r.push(e),2===e.type&&e.content&&n.push(e))})),n.forEach((function(e){var t=r.findIndex((function(t){return-1!==t.position.indexOf(e.position)}));-1!==t&&(r[t].note=e.content)})),o=[],c=0;case 7:if(!(c<r.length)){e.next=33;break}if(a=r[c],i=a.book,u=p()("".concat(a.book).concat(a.content)),l=a.content,s=a.note,o.includes(i)){e.next=23;break}return o.push(i),d=p()(i),f={uuid:d,title:i,book:i,from:"kindle"},e.next=19,v(d,"books");case 19:if(b=e.sent,b){e.next=23;break}return e.next=23,V(f,"books");case 23:return O={uuid:u,title:i,text:l,note:s,content_update:"",uploaded:!1,from:"kindle"},e.next=26,v(u);case 26:if(m=e.sent,m){e.next=30;break}return e.next=30,V(O);case 30:c++,e.next=7;break;case 33:return e.next=35,J(o);case 35:return e.abrupt("return",!0);case 36:case"end":return e.stop()}}),e)}))),Y.apply(this,arguments)}function Q(e){return e=e.trim(),e?new W(e):null}W.prototype.init=function(){var e=this.texts.replace(/^(\n|\r)*/g,"").replace(/(\n|\r)*$/g,"").split("\r\n").filter((function(e){return e&&"\n"!==e&&"\r"!==e})),t=null;t=X.split_book(e[0]),K(this,t),e[1]&&(t=X.split_created(e[1]),K(this,t)),this.content=e[2],t=null};var $=G,ee=n("1431");function te(e){return ne.apply(this,arguments)}function ne(){return ne=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n,r,o,c,a,i,u,l,s,d,f,b,O,m,j,h,x,g;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t.replace(/\n|\r/g,""),r=ee.load(n),r("h3.noteHeading").length&&(n=n.replace(/<\/h3>/g,"</div>").replace(/<\/div><div class='noteText'>/g,"</h3><div class='noteText'>"),r=ee.load(n)),o=r(".bookTitle")[0],c=r(o).text().trim(),a=Array.from(r(".noteText")),i=a.length-1,u=[],l=i;case 9:if(!(l>=0)){e.next=27;break}if(s=a[l],d=Z(s.prev.children[0].data),f=s.children.filter((function(e){return"text"===e.type})).map((function(e){return e.data.trim()})).join(""),2===d&&u.push(f),1!==d){e.next=24;break}return b=p()("".concat(c).concat(f)),O=u.pop()||"",m={uuid:b,title:c,text:f,note:O,content_update:"",uploaded:!1,from:"kindle"},e.next=20,v(b);case 20:if(j=e.sent,j){e.next=24;break}return e.next=24,V(m);case 24:l--,e.next=9;break;case 27:return h=p()(c),x={uuid:h,title:c,book:c,from:"kindle"},e.next=31,v(h,"books");case 31:if(g=e.sent,g){e.next=35;break}return e.next=35,V(x,"books");case 35:return e.next=37,J([c]);case 37:return e.abrupt("return",!0);case 38:case"end":return e.stop()}}),e)}))),ne.apply(this,arguments)}var re=te;function oe(e){return ce.apply(this,arguments)}function ce(){return ce=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n,r,o,c,a,i,u,l,s,d;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,n=t.entries,r=t.title,o=p()(r),c={uuid:o,title:r,book:r,from:"koreader"},e.next=6,v(o,"books");case 6:if(a=e.sent,a){e.next=10;break}return e.next=10,V(c,"books");case 10:if(!n||!n.length){e.next=25;break}i=0;case 12:if(!(i<n.length)){e.next=25;break}return u=n[i].text,l=p()("".concat(r).concat(u)),s={uuid:l,title:r,text:u,note:"",content_update:"",uploaded:!1,from:"koreader"},e.next=18,v(l);case 18:if(d=e.sent,d){e.next=22;break}return e.next=22,V(s);case 22:i++,e.next=12;break;case 25:return e.next=27,J([r]);case 27:return e.abrupt("return",!0);case 30:return e.prev=30,e.t0=e["catch"](0),e.abrupt("return",Promise.reject(e.t0));case 33:case"end":return e.stop()}}),e,null,[[0,30]])}))),ce.apply(this,arguments)}function ae(e){return ie.apply(this,arguments)}function ie(){return ie=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=JSON.parse(t),console.log(n),!n.documents||!Array.isArray(n.documents)){e.next=10;break}r=0;case 4:if(!(r<n.documents.length)){e.next=10;break}return e.next=7,oe(n.documents[r]);case 7:r++,e.next=4;break;case 10:if(!n.entries||!n.entries.length){e.next=13;break}return e.next=13,oe(n);case 13:case"end":return e.stop()}}),e)}))),ie.apply(this,arguments)}n("fb6a");var ue={},le={},se={},de=function(){},fe=function(){return Promise.resolve(!0)};Object({NODE_ENV:"production",BASE_URL:""}).IS_ELECTRON&&(ue=n("3e8f"),le=n("3c43"),se=n("7781"),de=n("c7b3").db,fe=function(){var e=le.homedir(),t="/Library/Containers/com.apple.iBooksX/Data/Documents/AEAnnotation/",n="";try{n=ue.readdirSync("".concat(e).concat(t))}catch(a){return Promise.reject("未发现笔记文件")}var r=n.find((function(e){return"sqlite"===e.slice(-6).toLowerCase()}));if(!r)return Promise.reject("未发现笔记文件");var c=de("".concat(e).concat(t),r);return new Promise((function(t,n){c.all("\n          SELECT\n              ZANNOTATIONREPRESENTATIVETEXT as BroaderText,\n              ZANNOTATIONSELECTEDTEXT as SelectedText,\n              ZANNOTATIONNOTE as Note,\n              ZFUTUREPROOFING5 as Chapter,\n              ZANNOTATIONCREATIONDATE as Created,\n              ZANNOTATIONMODIFICATIONDATE as Modified,\n              ZANNOTATIONLOCATION as Localtion,\n              ZANNOTATIONASSETID\n          FROM ZAEANNOTATION\n          WHERE ZANNOTATIONSELECTEDTEXT IS NOT NULL\n          AND ZANNOTATIONDELETED = 0\n          ORDER BY ZANNOTATIONASSETID ASC\n        ",function(){var r=Object(o["a"])(regeneratorRuntime.mark((function r(o,c){var a,i,u,l,s,d,f,b,O,m,j,h;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(o){r.next=51;break}return a="".concat(e,"/Library/Containers/com.apple.BKAgentService/Data/Documents/iBooks/Books/Books.plist"),i={},u=[],r.prev=4,r.next=7,se.parseFile(a);case 7:if(l=r.sent,i=l[0],!(i&&i.Books&&i.Books.length)){r.next=26;break}u=i.Books,s=0;case 12:if(!(s<i.Books.length)){r.next=26;break}return d=i.Books[s].itemName,f=d,b=p()(f),O={uuid:b,title:f,book:f,from:"applebooks"},r.next=19,v(b,"books");case 19:if(m=r.sent,m){r.next=23;break}return r.next=23,V(O,"books");case 23:s++,r.next=12;break;case 26:r.next=32;break;case 28:r.prev=28,r.t0=r["catch"](4),console.log(r.t0),n("图书列表解析出错");case 32:if(!c.length){r.next=46;break}r.prev=33,j=regeneratorRuntime.mark((function e(t){var n,r,o,a,i,l,s,d,f,b;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=c[t],r=u.findIndex((function(e){return e.BKGeneratedItemId===n.ZANNOTATIONASSETID})),!(r>-1)){e.next=16;break}return o=u[r].itemName,a=n.SelectedText,i=n.Note||"",l=n.Localtion||"",s=n.ZANNOTATIONASSETID||"",d=p()("".concat(o).concat(a)),f={uuid:d,title:o,text:a,note:i,localtion:l,assetid:s,content_update:"",uploaded:!1,from:"applebooks"},e.next=12,v(d);case 12:if(b=e.sent,b){e.next=16;break}return e.next=16,V(f);case 16:case"end":return e.stop()}}),e)})),h=0;case 36:if(!(h<c.length)){r.next=41;break}return r.delegateYield(j(h),"t1",38);case 38:h++,r.next=36;break;case 41:r.next=46;break;case 43:r.prev=43,r.t2=r["catch"](33),console.log(r.t2);case 46:return r.next=48,J(u.map((function(e){return e.itemName})));case 48:t(!0),r.next=52;break;case 51:n("笔记解析出错");case 52:case"end":return r.stop()}}),r,null,[[4,28],[33,43]])})));return function(e,t){return r.apply(this,arguments)}}())}))});var be=fe,pe=n("5a79"),Oe=n("4995"),me=n("15fd"),je=n("bc3a"),he=n.n(je);function ve(){return new Promise((function(e,t){try{var r=n("daba"),o=r.session;o.defaultSession.cookies.get({url:"https://weread.qq.com"}).then((function(n){if(n&&n.length){var r=n.find((function(e){return"wr_vid"===e.name}));r&&e(r.value),t(!1)}t(!1)})).catch((function(){return t(!1)}))}catch(c){console.log(c),t(!1)}}))}he.a.defaults.baseURL="https://i.weread.qq.com";var xe={Host:"i.weread.qq.com",Connection:"keep-alive","Upgrade-Insecure-Requests":1,"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.103 Safari/537.36",Accept:"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3","Accept-Encoding":"gzip, deflate, br","Accept-Language":"zh-CN,zh;q=0.9,en;q=0.8"};he.a.interceptors.request.use((function(e){return Object(f["a"])({},e)}),(function(e){return Promise.reject(e)})),he.a.interceptors.response.use((function(e){return e.data}),(function(e){var t=e.response;if(t)return console.log(t.statusText,t.data&&t.data.errmsg),Promise.reject(t.data);console.log("something wrong")}));var ge=function(e){return he()({method:"get",url:"/book/bookmarklist",headers:xe,params:{bookId:e}})},ke=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ve().catch((function(e){console.log(e)}));case 2:if(t=e.sent,t){e.next=5;break}return e.abrupt("return",Promise.reject(401));case 5:return e.abrupt("return",he()({method:"get",headers:xe,url:"/user/notebooks"}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),we=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ve().catch((function(e){}));case 2:return n=e.sent,e.abrupt("return",he()({method:"get",url:"/web/review/list",baseURL:"https://weread.qq.com",headers:xe,params:Object(f["a"])({userVid:n},t)}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ne=["title"];function Ve(){var e=n("daba"),t=e.session;return new Promise((function(e,n){t.defaultSession.cookies.get({url:"https://weread.qq.com/"}).then((function(r){try{for(var o=0;o<r.length;o++)t.defaultSession.cookies.remove("https://weread.qq.com/",r[o].name,(function(e){console.log("cookie 清除出错")}));e()}catch(c){n()}})).catch((function(){return n()}))}))}function ye(){return Te.apply(this,arguments)}function Te(){return Te=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n,r,o,c,a,i,u,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ke();case 3:if(t=e.sent,n=t.books,!n||!n.length){e.next=25;break}r=0;case 7:if(!(r<n.length)){e.next=22;break}return o=n[r],c=o.book.title,a=o.bookId,i=p()(c),u={uuid:i,title:c,form:"weread",book:c,bookId:a},e.next=15,v(i,"books");case 15:if(l=e.sent,l){e.next=19;break}return e.next=19,V(u,"books");case 19:r++,e.next=7;break;case 22:return e.abrupt("return",n.map((function(e){return e.book})));case 25:return e.abrupt("return",Promise.reject([]));case 26:e.next=32;break;case 28:return e.prev=28,e.t0=e["catch"](0),401===e.t0&&Ve(),e.abrupt("return",Promise.reject(e.t0));case 32:case"end":return e.stop()}}),e,null,[[0,28]])}))),Te.apply(this,arguments)}function Ee(e,t){return Ce.apply(this,arguments)}function Ce(){return Ce=Object(o["a"])(regeneratorRuntime.mark((function e(t,n){var r,o,c,a,i,u,l,s,d;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ge(t);case 3:if(r=e.sent,-2012!==r.errcode){e.next=6;break}return e.abrupt("return",Promise.reject(401));case 6:o=r.updated,c=0;case 8:if(!(c<o.length)){e.next=23;break}return a=o[c],i=p()("".concat(n).concat(a.markText)),u=a.markText,l="",s={uuid:i,title:n,text:u,note:l,content_update:"",uploaded:!1,form:"weread"},e.next=16,v(i);case 16:if(d=e.sent,d){e.next=20;break}return e.next=20,V(s);case 20:c++,e.next=8;break;case 23:return e.abrupt("return",!0);case 26:return e.prev=26,e.t0=e["catch"](0),e.abrupt("return",Promise.reject(e.t0));case 29:case"end":return e.stop()}}),e,null,[[0,26]])}))),Ce.apply(this,arguments)}function _e(e){return Se.apply(this,arguments)}function Se(){return Se=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n,r,o,c,a,i,u,l,s,d,f;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.title,r=Object(me["a"])(t,Ne),e.prev=1,e.next=4,we(r);case 4:if(o=e.sent,-2012!==o.errcode){e.next=7;break}return e.abrupt("return",Promise.reject(401));case 7:c=o.reviews,a=0;case 9:if(!(a<c.length)){e.next=24;break}return i=c[a],u=i.review.abstract,l=p()("".concat(n).concat(u)),s=i.review.content||"",d={uuid:l,title:n,text:u,note:s,content_update:"",uploaded:!1,form:"weread"},e.next=17,v(l);case 17:if(f=e.sent,f){e.next=21;break}return e.next=21,V(d);case 21:a++,e.next=9;break;case 24:return e.abrupt("return",!0);case 27:return e.prev=27,e.t0=e["catch"](1),e.abrupt("return",Promise.reject(e.t0));case 30:case"end":return e.stop()}}),e,null,[[1,27]])}))),Se.apply(this,arguments)}var Le=function(e){return Object(r["pushScopeId"])("data-v-638eecae"),e=e(),Object(r["popScopeId"])(),e},Ae={class:"left-bar-form"},De={class:"left-bar-form-content"},Re={class:"left-bar-form-content-top"},Be={class:"upload-content radius flex pd-10 border"},Ie=Le((function(){return Object(r["createElementVNode"])("i",{class:"el-icon-folder-add"},null,-1)})),Ue={class:"el-upload__text"},Pe={class:"how"},Me=Le((function(){return Object(r["createElementVNode"])("i",{class:"el-icon-question"},null,-1)})),qe=Le((function(){return Object(r["createElementVNode"])("div",{class:"pb-10"},[Object(r["createElementVNode"])("span",{class:"bold text-highlight"},"JSON:"),Object(r["createTextVNode"])(" KOReader 导出的 JSON 文件 ")],-1)})),Fe=Le((function(){return Object(r["createElementVNode"])("div",{class:"pb-10"},[Object(r["createElementVNode"])("span",{class:"bold text-highlight"},"HTML:"),Object(r["createTextVNode"])(" Kindle 或 Kindle App 导出的 HTML 文件 ")],-1)})),ze=Le((function(){return Object(r["createElementVNode"])("div",{class:"pb-16"},[Object(r["createElementVNode"])("span",{class:"bold text-highlight"},"TXT:"),Object(r["createTextVNode"])(" Kindle 的 My Clippings.txt 文件 ")],-1)})),Je=Le((function(){return Object(r["createElementVNode"])("div",{class:"pb-6 bold text-highlight"}," My Clippings.txt 在哪？ ",-1)})),He=Le((function(){return Object(r["createElementVNode"])("div",{class:"pb-16"},[Object(r["createElementVNode"])("div",{class:"pb-4"}," 将 Kindle 通过数据线连接至电脑 "),Object(r["createTextVNode"])(" 文件位于：Kindle根目录 - document - My Clippings.txt ")],-1)})),Ke={class:"pointer"},Ze={class:"flex thired-import"},Xe={class:"pointer text-center border pd-10 radius"},We=Le((function(){return Object(r["createElementVNode"])("div",{slot:"content",style:{"line-height":"1.5em"}},[Object(r["createElementVNode"])("b",null,"点击下载应用"),Object(r["createElementVNode"])("br"),Object(r["createTextVNode"])(" 由于 Apple Books 与微信读书笔记的读取方式限制， "),Object(r["createElementVNode"])("br"),Object(r["createTextVNode"])(" 必须安装客户端才能使用。 ")],-1)})),Ge=Le((function(){return Object(r["createElementVNode"])("a",{class:"link",href:"https://github.com/Tit1e/kindle2Flomo/releases",target:"_blank"}," 从 Apple Books / 微信读书 导入 ",-1)})),Ye=Le((function(){return Object(r["createElementVNode"])("a",{class:"how link",href:"https://evolly.one/2021/05/30/158-mac-handle-bad-app/",target:"_blank"}," Send2flomo.app 打不开？ ",-1)})),Qe={class:"left-bar-form-content-body"},$e=Le((function(){return Object(r["createElementVNode"])("i",{class:"el-icon-set-up mr-4"},null,-1)})),et={class:"flex"},tt={class:"flex-1"},nt={class:"flex-1 pl-10"},rt=Object(r["createTextVNode"])("摘录上方"),ot=Object(r["createTextVNode"])("摘录下方"),ct=Le((function(){return Object(r["createElementVNode"])("span",{class:"fz-12"},[Object(r["createElementVNode"])("b",{class:"highlight"},"仅在有笔记时生效"),Object(r["createTextVNode"])("，且总在笔记与摘录之间")],-1)})),at=Le((function(){return Object(r["createElementVNode"])("i",{class:"el-icon-notebook-2 mr-4"},null,-1)})),it={class:"list-wrap"},ut={class:"left-bar-bottom"},lt={class:"iframe-box"},st={key:0,src:"https://weread.qq.com/#login",frameborder:"0"},dt={class:"text-center"},ft=Object(r["createTextVNode"])("取消"),bt=Object(r["createTextVNode"])("我已登录"),pt=Object(r["defineComponent"])({emits:["update-tag","parse","submit","list-update"],setup:function(e,t){var n=t.emit,a=Object(c["b"])(),i=a.t,u=Object(_["b"])(),l=Object(r["computed"])((function(){return u.getters.selectedList})),s=Object(r["computed"])((function(){return u.getters.importCount>=100})),d=Object(r["computed"])((function(){return u.getters.bookList}));function b(e){var t=d.value.find((function(e){return e.title===O.title}));t&&(t=Object(f["a"])(Object(f["a"])({},t),{},{book:e.target.value}),delete t.texts),u.commit("UPDATE_BOOK",t),T(t,"books")}Object(r["watch"])((function(){return d.value[0]}),(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e&&e.title!==t.title&&k(e)}));var p=u.getters.isElectron,O=Object(r["reactive"])({book:"",title:"",split:"",tag:"kindle",api:"",noTag:!1,tagPosition:!1,notePosition:!1,noEmptyLine:!0}),m=Object(r["ref"])("1");Object(r["watch"])((function(){return m.value}),(function(e){window.localStorage.setItem("activeName",e)}));var j=Object(r["computed"])((function(){return!l.value.length||!O.api||s.value}));function h(){var e=JSON.parse(localStorage.getItem("options")||"{}");O=Object(r["reactive"])(Object(f["a"])(Object(f["a"])({},O),e)),m.value=window.localStorage.getItem("activeName")||"1"}function v(e){return x.apply(this,arguments)}function x(){return x=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n,r,o,c,a,i,u,l,s=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=!(s.length>1&&void 0!==s[1])||s[1],r=s.length>2?s[2]:void 0,o=t.reverse(),c=o[0],a=c.bookId,i=c.title,u=_e({title:i,bookId:a,listType:11,maxIdx:0,count:0,listMode:2,synckey:0,mine:1}),l=Ee(a,i),e.prev=6,e.next=9,Promise.all([u,l]);case 9:if(n){e.next=14;break}return e.next=12,J(d.value.map((function(e){return e.title})).reverse(),!0);case 12:e.next=16;break;case 14:return e.next=16,J(o.map((function(e){return e.title})),n);case 16:r.close(),e.next=24;break;case 19:e.prev=19,e.t0=e["catch"](6),console.log(e.t0),-2012===e.t0.errcode&&y(),r.close();case 24:case"end":return e.stop()}}),e,null,[[6,19]])}))),x.apply(this,arguments)}function g(e){var t=d.value.find((function(t){return t.title===e}));if(!t)return!1;if(t.bookId){var n=E();v([t],!1,n)}k(t)}function k(e){var t=e.title,r=e.texts,o=(e.bookId,e.book);O.title=t,O.book=o,R(),n("list-update",{list:r,options:O}),S(!0)}h(),Object(r["watch"])((function(){return O}),(function(){R(),S()}),{deep:!0});var w=Object(r["ref"])(!1),N=Object(r["ref"])(!1);function V(e){ye().then((function(t){w.value=!1,N.value=!1,v(t,!0,e)})).catch((function(t){console.log(t),N.value=!1,e.close()}))}function y(){w.value=!0,N.value=!0;var e=E();V(e)}function E(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return pe["a"].service(Object(f["a"])({body:!0,lock:!0,text:i("reading-notes")},e))}function C(){var e=E();be().then((function(){e.close()})).catch((function(t){Oe["a"].error(t),e.close()}))}function S(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e&&(m.value="2"),A(),n("parse",O)}function L(){n("submit",O.api)}function A(){var e=O,t=e.noTag,n=e.api,r=e.tag,o=e.split,c=e.tagPosition,a=e.noEmptyLine,i={noTag:t,api:n,tag:r,split:o,tagPosition:c,noEmptyLine:a};localStorage.setItem("options",JSON.stringify(i))}var D=Object(r["ref"])("");function R(){var e="",t=O,r=t.tag,o=t.book,c=t.noTag;if(c)return n("update-tag",e),void(D.value=e);e=r?"#".concat(r,"/").concat(o):"#".concat(o),n("update-tag",e),D.value=e}function B(){document.querySelector("#fileSelect input").addEventListener("change",(function(e){var t=E(),n=e.target.files[0],r=n.name.split(".").pop().toLowerCase(),c=new FileReader;c.onload=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,"txt"!==r){e.next=4;break}return e.next=4,$(c.result);case 4:if("html"!==r){e.next=7;break}return e.next=7,re(c.result);case 7:if("json"!==r){e.next=10;break}return e.next=10,ae(c.result);case 10:t.close(),e.next=17;break;case 13:e.prev=13,e.t0=e["catch"](0),console.log("txt 解析出错：".concat(e.t0)),t.close();case 17:case"end":return e.stop()}}),e,null,[[0,13]])}))),c.readAsText(n)}))}return Object(r["onMounted"])((function(){B()})),function(e,t){var n=Object(r["resolveComponent"])("el-upload"),o=Object(r["resolveComponent"])("el-tooltip"),c=Object(r["resolveComponent"])("el-form-item"),a=Object(r["resolveComponent"])("el-divider"),u=Object(r["resolveComponent"])("el-input"),l=Object(r["resolveComponent"])("el-checkbox"),f=Object(r["resolveComponent"])("el-radio-button"),h=Object(r["resolveComponent"])("el-radio-group"),v=Object(r["resolveComponent"])("el-collapse-item"),x=Object(r["resolveComponent"])("el-radio"),k=Object(r["resolveComponent"])("el-collapse"),T=Object(r["resolveComponent"])("el-form"),E=Object(r["resolveComponent"])("el-button"),_=Object(r["resolveComponent"])("el-dialog"),S=Object(r["resolveDirective"])("loading");return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",{class:Object(r["normalizeClass"])(["left-bar",{"pt-10":!Object(r["unref"])(p),electron:Object(r["unref"])(p)}])},[Object(r["createElementVNode"])("div",Ae,[Object(r["createVNode"])(T,{model:Object(r["unref"])(O),ref:function(e,t){t["form"]=e},size:"mini","label-suffix":"：","label-position":"top"},{default:Object(r["withCtx"])((function(){return[Object(r["createElementVNode"])("div",De,[Object(r["createElementVNode"])("div",Re,[Object(r["createVNode"])(c,{"label-width":"0"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(n,{id:"fileSelect",style:{width:"100%"},"show-file-list":!1,multiple:!1,action:"","auto-upload":!1,accept:".html,.txt,.json"},{default:Object(r["withCtx"])((function(){return[Object(r["createElementVNode"])("div",Be,[Ie,Object(r["createElementVNode"])("div",Ue,Object(r["toDisplayString"])(Object(r["unref"])(i)("upload-file")),1)])]})),_:1}),Object(r["createElementVNode"])("div",Pe,[Me,Object(r["createVNode"])(o,{effect:"dark",placement:"right"},{content:Object(r["withCtx"])((function(){return[Object(r["createElementVNode"])("div",null,[qe,Fe,ze,Je,He,Object(r["createElementVNode"])("div",{class:"link pointer underline bold text-highlight",onClick:t[0]||(t[0]=function(e){return Object(r["unref"])(P)("https://mp.weixin.qq.com/s/CPIYoGItJVWJGk30MoVNXA")})},Object(r["toDisplayString"])(Object(r["unref"])(i)("how-export")),1)])]})),default:Object(r["withCtx"])((function(){return[Object(r["createElementVNode"])("span",Ke,Object(r["toDisplayString"])(Object(r["unref"])(i)("questions-and-answers")),1)]})),_:1})])]})),_:1}),Object(r["unref"])(p)?(Object(r["openBlock"])(),Object(r["createBlock"])(c,{key:0,"label-width":"0"},{default:Object(r["withCtx"])((function(){return[Object(r["createElementVNode"])("div",Ze,[Object(r["createElementVNode"])("div",{class:"pointer text-center border pd-10 radius flex-item",onClick:C}," Apple Books "),Object(r["createElementVNode"])("div",{class:"pointer text-center border pd-10 radius flex-item",onClick:y},Object(r["toDisplayString"])(Object(r["unref"])(i)("weread")),1)])]})),_:1})):(Object(r["openBlock"])(),Object(r["createBlock"])(c,{key:1,"label-width":"0"},{default:Object(r["withCtx"])((function(){return[Object(r["createElementVNode"])("div",Xe,[Object(r["createVNode"])(o,{effect:"dark",placement:"right"},{content:Object(r["withCtx"])((function(){return[We]})),default:Object(r["withCtx"])((function(){return[Ge]})),_:1})]),Ye]})),_:1}))]),Object(r["createElementVNode"])("div",Qe,[Object(r["createVNode"])(k,{modelValue:Object(r["unref"])(m),"onUpdate:modelValue":t[10]||(t[10]=function(e){return Object(r["isRef"])(m)?m.value=e:m=e}),accordion:""},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(v,{name:"1"},{title:Object(r["withCtx"])((function(){return[Object(r["createElementVNode"])("div",null,[$e,Object(r["createTextVNode"])(Object(r["toDisplayString"])(Object(r["unref"])(i)("parse-options")),1)])]})),default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(a,null,{default:Object(r["withCtx"])((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(Object(r["unref"])(i)("api-options")),1)]})),_:1}),Object(r["createVNode"])(c,{label:"","label-width":"0px"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(u,{modelValue:Object(r["unref"])(O).api,"onUpdate:modelValue":t[1]||(t[1]=function(e){return Object(r["unref"])(O).api=e}),type:"password","show-password":"",placeholder:"API 采用本地存储"},null,8,["modelValue"])]})),_:1}),Object(r["createVNode"])(a,null,{default:Object(r["withCtx"])((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(Object(r["unref"])(i)("tag-options")),1)]})),_:1}),Object(r["createVNode"])(c,{label:"Tag"},{default:Object(r["withCtx"])((function(){return[Object(r["createElementVNode"])("div",et,[Object(r["createElementVNode"])("div",tt,[Object(r["createVNode"])(u,{modelValue:Object(r["unref"])(O).tag,"onUpdate:modelValue":t[2]||(t[2]=function(e){return Object(r["unref"])(O).tag=e}),disabled:Object(r["unref"])(O).noTag,placeholder:"Tag 名称",clearable:""},null,8,["modelValue","disabled"])]),Object(r["createElementVNode"])("div",nt,[Object(r["createVNode"])(l,{modelValue:Object(r["unref"])(O).noTag,"onUpdate:modelValue":t[3]||(t[3]=function(e){return Object(r["unref"])(O).noTag=e})},{default:Object(r["withCtx"])((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(Object(r["unref"])(i)("hide-tag")),1)]})),_:1},8,["modelValue"])])])]})),_:1}),Object(r["unref"])(O).noTag?Object(r["createCommentVNode"])("",!0):(Object(r["openBlock"])(),Object(r["createElementBlock"])(r["Fragment"],{key:0},[Object(r["createVNode"])(c,{label:Object(r["unref"])(i)("position-of-tag")},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(h,{modelValue:Object(r["unref"])(O).tagPosition,"onUpdate:modelValue":t[4]||(t[4]=function(e){return Object(r["unref"])(O).tagPosition=e})},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(f,{label:!0},{default:Object(r["withCtx"])((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(Object(r["unref"])(i)("top")),1)]})),_:1}),Object(r["createVNode"])(f,{label:!1},{default:Object(r["withCtx"])((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(Object(r["unref"])(i)("bottom")),1)]})),_:1})]})),_:1},8,["modelValue"])]})),_:1},8,["label"]),Object(r["createVNode"])(c,{label:"空行"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(h,{modelValue:Object(r["unref"])(O).noEmptyLine,"onUpdate:modelValue":t[5]||(t[5]=function(e){return Object(r["unref"])(O).noEmptyLine=e})},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(f,{label:!1},{default:Object(r["withCtx"])((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(Object(r["unref"])(i)("on")),1)]})),_:1}),Object(r["createVNode"])(f,{label:!0},{default:Object(r["withCtx"])((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(Object(r["unref"])(i)("off")),1)]})),_:1})]})),_:1},8,["modelValue"])]})),_:1})],64)),Object(r["createVNode"])(a,null,{default:Object(r["withCtx"])((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(Object(r["unref"])(i)("notes-options")),1)]})),_:1}),Object(r["createVNode"])(c,{label:"位置"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(h,{modelValue:Object(r["unref"])(O).notePosition,"onUpdate:modelValue":t[6]||(t[6]=function(e){return Object(r["unref"])(O).notePosition=e})},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(f,{label:!0},{default:Object(r["withCtx"])((function(){return[rt]})),_:1}),Object(r["createVNode"])(f,{label:!1},{default:Object(r["withCtx"])((function(){return[ot]})),_:1})]})),_:1},8,["modelValue"])]})),_:1}),Object(r["createVNode"])(c,{label:"分隔符"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(u,{modelValue:Object(r["unref"])(O).split,"onUpdate:modelValue":t[7]||(t[7]=function(e){return Object(r["unref"])(O).split=e}),placeholder:"为空以空行填充，此空行无法禁用",clearable:""},null,8,["modelValue"]),ct]})),_:1})]})),_:1}),Object(r["createVNode"])(v,{name:"2"},{title:Object(r["withCtx"])((function(){return[Object(r["createElementVNode"])("div",null,[at,Object(r["createTextVNode"])(Object(r["toDisplayString"])(Object(r["unref"])(i)("book-list")),1)])]})),default:Object(r["withCtx"])((function(){return[Object(r["unref"])(d).length?(Object(r["openBlock"])(),Object(r["createElementBlock"])(r["Fragment"],{key:0},[Object(r["createVNode"])(c,{label:Object(r["unref"])(i)("book-name")},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(u,{modelValue:Object(r["unref"])(O).book,"onUpdate:modelValue":t[8]||(t[8]=function(e){return Object(r["unref"])(O).book=e}),onBlur:b},null,8,["modelValue"])]})),_:1},8,["label"]),Object(r["createVNode"])(c,{label:Object(r["unref"])(i)("book-list"),"label-width":"0"},{default:Object(r["withCtx"])((function(){return[Object(r["createElementVNode"])("div",it,[Object(r["createVNode"])(h,{class:"book-list",modelValue:Object(r["unref"])(O).title,"onUpdate:modelValue":t[9]||(t[9]=function(e){return Object(r["unref"])(O).title=e}),size:"small",onChange:g},{default:Object(r["withCtx"])((function(){return[(Object(r["openBlock"])(!0),Object(r["createElementBlock"])(r["Fragment"],null,Object(r["renderList"])(Object(r["unref"])(d),(function(e){return Object(r["openBlock"])(),Object(r["createBlock"])(x,{key:e.uuid,label:e.title,border:""},{default:Object(r["withCtx"])((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.title),1)]})),_:2},1032,["label"])})),128))]})),_:1},8,["modelValue"])])]})),_:1},8,["label"])],64)):Object(r["createCommentVNode"])("",!0)]})),_:1})]})),_:1},8,["modelValue"])])])]})),_:1},8,["model"])]),Object(r["createElementVNode"])("div",ut,[Object(r["unref"])(j)?(Object(r["openBlock"])(),Object(r["createBlock"])(o,{key:0,effect:"dark",disabled:!1,content:Object(r["unref"])(s)?"导入数量已达 100 条限额":"请确保 API 已填写，需要导入的 MEMO 已勾选",placement:"top"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(E,{type:"primary",disabled:Object(r["unref"])(j),size:"mini"},{default:Object(r["withCtx"])((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(Object(r["unref"])(i)("import")),1)]})),_:1},8,["disabled"])]})),_:1},8,["content"])):(Object(r["openBlock"])(),Object(r["createBlock"])(E,{key:1,type:"primary",size:"mini",onClick:L},{default:Object(r["withCtx"])((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(Object(r["unref"])(i)("import")),1)]})),_:1}))]),Object(r["createVNode"])(_,{"custom-class":"login-dialog",modelValue:w.value,"onUpdate:modelValue":t[12]||(t[12]=function(e){return w.value=e}),"close-on-click-modal":!1,"append-to-body":"","destroy-on-close":"",width:"270px"},{default:Object(r["withCtx"])((function(){return[Object(r["withDirectives"])(Object(r["createElementVNode"])("div",lt,[w.value?(Object(r["openBlock"])(),Object(r["createElementBlock"])("iframe",st)):Object(r["createCommentVNode"])("",!0)],512),[[S,N.value]]),Object(r["withDirectives"])(Object(r["createElementVNode"])("div",dt,[Object(r["createVNode"])(E,{type:"text",style:{color:"#999999"},onClick:t[11]||(t[11]=function(e){return w.value=!1})},{default:Object(r["withCtx"])((function(){return[ft]})),_:1}),Object(r["createVNode"])(E,{type:"text",onClick:V},{default:Object(r["withCtx"])((function(){return[bt]})),_:1})],512),[[r["vShow"],!N.value]])]})),_:1},8,["modelValue"])],2)}}});n("9bbd");const Ot=l()(pt,[["__scopeId","data-v-638eecae"]]);var mt=Ot,jt=(n("2b3d"),n("9861"),n("b680"),n("a596")),ht=n.n(jt),vt=function(e){return Object(r["pushScopeId"])("data-v-51eca6f4"),e=e(),Object(r["popScopeId"])(),e},xt={class:"right-content-bar"},gt={class:"flex-1 flex"},kt=vt((function(){return Object(r["createElementVNode"])("div",{style:{width:"200px","line-height":"1.5em"}}," 未经审视的生活不值得过，未经审视的思想也不应该汇入你的大脑。建议在导入前审视一遍内容。 ",-1)})),wt=Object(r["createTextVNode"])(" 已选择 "),Nt={class:"highlight"},Vt=Object(r["createTextVNode"])(" 条，共 "),yt={class:"highlight"},Tt=Object(r["createTextVNode"])(" 条。已导入 "),Et={class:"highlight"},Ct={class:"bar-right"},_t=vt((function(){return Object(r["createElementVNode"])("div",{class:"export k-icon"},null,-1)})),St=Object(r["createTextVNode"])("导出 Markdown"),Lt=Object(r["createTextVNode"])("导出 CSV"),At=Object(r["createTextVNode"])("导出所有数据"),Dt=vt((function(){return Object(r["createElementVNode"])("div",{class:"help-box"},[Object(r["createElementVNode"])("div",{class:"mb-10"},"注意事项："),Object(r["createElementVNode"])("div",{class:"mb-6"},"1. 导入前必须填写 Api 与选择要导入的笔记"),Object(r["createElementVNode"])("div",{class:"mb-6"},"2. 双击笔记可进入编辑状态，编辑过的笔记右下角显示编辑图标"),Object(r["createElementVNode"])("div",{class:"mb-6"},"3. 已导入的笔记右下角显示 flomo 图标，且不可再编辑"),Object(r["createElementVNode"])("div",{class:"mb-6"},"4. 点击右下角图标可还原内容，重置笔记状态"),Object(r["createElementVNode"])("div",{class:"mb-6"},"5. 已导入或编辑过的笔记将不再参与格式调整，如需调整请先重置笔记状态"),Object(r["createElementVNode"])("div",{class:"mb-10"},"还有其他问题？扫码进群反馈"),Object(r["createElementVNode"])("img",{class:"block block-center",width:"200",height:"200",src:ht.a})],-1)})),Rt=["title"],Bt=vt((function(){return Object(r["createElementVNode"])("div",{class:"setting k-icon"},null,-1)})),It=Object(r["createTextVNode"])(" Tit1e's Photo Studio "),Ut={href:"https://evolly.one",target:"_blank"},Pt=vt((function(){return Object(r["createElementVNode"])("a",{href:"https://album.animalcrossing.life",target:"_blank"},"Tit1e's Photo Studio",-1)})),Mt={href:"https://web.okjike.com/u/FFDB1E46-63DC-43BE-AA1A-36F3D9CD0017",target:"_blank"},qt={href:"https://mp.weixin.qq.com/s/o793lUsBaWc61fLZzFDlxg",target:"_blank",rel:"noopener noreferrer"},Ft=Object(r["defineComponent"])({emits:["export"],setup:function(e,t){var a=t.emit,i=Object(_["b"])(),u=i.getters.isElectron,l={};u&&(l=n("bdb9").ipcRenderer);var s=Object(r["ref"])(!1);function d(){s.value=!s.value,i.commit("SELECT_ALL",s.value)}function f(e){a("export",e)}var b=Object(c["b"])(),p=b.t,O=b.locale;function m(){O.value="zh-CN"===O.value?"en-US":"zh-CN",window.localStorage.setItem("locale",O.value)}i.commit("GET_IMPORT_COUNT");var j=Object(r["computed"])((function(){return i.getters.selectedList.length})),h=Object(r["computed"])((function(){return i.getters.textList.length})),v=Object(r["computed"])((function(){return i.getters.importCount})),x={blog:"https://evolly.one/",photo:"https://album.animalcrossing.life/",jike:"https://web.okjike.com/u/FFDB1E46-63DC-43BE-AA1A-36F3D9CD0017",thank:"https://mp.weixin.qq.com/s/o793lUsBaWc61fLZzFDlxg"};function g(e){u&&("update"===e?l.send("update"):P(x[e]))}var k=null;return u&&(l.on("updateDownloading",function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,n){var o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("updateDownloaded"!==n){e.next=7;break}return k&&k.close(),e.next=4,Object(r["nextTick"])();case 4:k=null,e.next=10;break;case 7:k||(k=pe["a"].service({text:"正在下载... 0%",lock:!0,spinner:"el-icon-loading",background:"rgba(255, 255, 255, 1)"})),o=n.percent.toFixed(2),k&&k.setText("正在下载... ".concat(o,"%"));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),l.on("updateDownloaded",(function(){})),l.on("updateNotAvailable",(function(e,t){console.log("updateNotAvailable",t)}))),function(e,t){var n=Object(r["resolveComponent"])("el-button"),o=Object(r["resolveComponent"])("el-tooltip"),c=Object(r["resolveComponent"])("el-dropdown-item"),a=Object(r["resolveComponent"])("el-dropdown-menu"),i=Object(r["resolveComponent"])("el-dropdown");return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",xt,[Object(r["createElementVNode"])("div",gt,[Object(r["createVNode"])(o,{effect:"dark",placement:"left"},{content:Object(r["withCtx"])((function(){return[kt]})),default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(n,{type:"text",class:"mr-10",onClick:d},{default:Object(r["withCtx"])((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(Object(r["unref"])(p)(s.value?"not-all":"all")),1)]})),_:1})]})),_:1}),wt,Object(r["createElementVNode"])("span",Nt,Object(r["toDisplayString"])(Object(r["unref"])(j)),1),Vt,Object(r["createElementVNode"])("span",yt,Object(r["toDisplayString"])(Object(r["unref"])(h)),1),Tt,Object(r["createElementVNode"])("span",Et,Object(r["toDisplayString"])(Object(r["unref"])(v))+" / 100",1)]),Object(r["createElementVNode"])("div",Ct,[Object(r["createVNode"])(i,{onCommand:f},{dropdown:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(a,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(c,{command:"markdown"},{default:Object(r["withCtx"])((function(){return[St]})),_:1}),Object(r["createVNode"])(c,{command:"csv"},{default:Object(r["withCtx"])((function(){return[Lt]})),_:1}),Object(r["createVNode"])(c,{command:"alldata"},{default:Object(r["withCtx"])((function(){return[At]})),_:1})]})),_:1})]})),default:Object(r["withCtx"])((function(){return[_t]})),_:1}),Object(r["createVNode"])(o,{effect:"dark",placement:"bottom"},{content:Object(r["withCtx"])((function(){return[Dt]})),default:Object(r["withCtx"])((function(){return[Object(r["createElementVNode"])("div",{class:"help k-icon",title:Object(r["unref"])(p)("help"),onClick:t[0]||(t[0]=function(){})},null,8,Rt)]})),_:1}),Object(r["createVNode"])(o,{effect:"dark",placement:"bottom",content:"中/英文切换"},{default:Object(r["withCtx"])((function(){return[Object(r["createElementVNode"])("div",{class:"translate k-icon",onClick:m})]})),_:1}),Object(r["createVNode"])(i,{onCommand:g},{dropdown:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(a,null,{default:Object(r["withCtx"])((function(){return[Object(r["unref"])(u)?(Object(r["openBlock"])(),Object(r["createElementBlock"])(r["Fragment"],{key:0},[Object(r["createVNode"])(c,{command:"update"},{default:Object(r["withCtx"])((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(Object(r["unref"])(p)("check-update")),1)]})),_:1}),Object(r["createVNode"])(c,{command:"blog",divided:""},{default:Object(r["withCtx"])((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(Object(r["unref"])(p)("blog")),1)]})),_:1}),Object(r["createVNode"])(c,{command:"photo"},{default:Object(r["withCtx"])((function(){return[It]})),_:1}),Object(r["createVNode"])(c,{command:"jike"},{default:Object(r["withCtx"])((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(Object(r["unref"])(p)("jike")),1)]})),_:1}),Object(r["createVNode"])(c,{command:"thank",divided:""},{default:Object(r["withCtx"])((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(Object(r["unref"])(p)("thanks")),1)]})),_:1})],64)):(Object(r["openBlock"])(),Object(r["createElementBlock"])(r["Fragment"],{key:1},[Object(r["createVNode"])(c,null,{default:Object(r["withCtx"])((function(){return[Object(r["createElementVNode"])("a",Ut,Object(r["toDisplayString"])(Object(r["unref"])(p)("blog")),1)]})),_:1}),Object(r["createVNode"])(c,null,{default:Object(r["withCtx"])((function(){return[Pt]})),_:1}),Object(r["createVNode"])(c,null,{default:Object(r["withCtx"])((function(){return[Object(r["createElementVNode"])("a",Mt,Object(r["toDisplayString"])(Object(r["unref"])(p)("jike")),1)]})),_:1}),Object(r["createVNode"])(c,{divided:""},{default:Object(r["withCtx"])((function(){return[Object(r["createElementVNode"])("a",qt,Object(r["toDisplayString"])(Object(r["unref"])(p)("thanks")),1)]})),_:1})],64))]})),_:1})]})),default:Object(r["withCtx"])((function(){return[Bt]})),_:1})])])}}});n("7d07");const zt=l()(Ft,[["__scopeId","data-v-51eca6f4"]]);var Jt=zt,Ht=(n("a9e3"),n("215e")),Kt=["href"],Zt=["data-index"],Xt={class:"priview"},Wt=["innerHTML"],Gt=Object(r["defineComponent"])({props:{info:{type:Object,default:function(){return{}}},index:{type:Number,default:0}},emits:["click","reset"],setup:function(e,t){var n=t.emit,o=e,c=Object(r["computed"])((function(){return o.info.uploaded})),a=Object(r["computed"])((function(){return!o.info.uploaded&&o.info.content_update}));function i(e,t){e.stopPropagation(),(t.content_update||t.uploaded)&&Ht["a"].confirm("该 memo 的内容与状态都将被还原，是否继续？","还 原",{closeOnClickModal:!1,confirmButtonText:"还 原",cancelButtonText:"取 消",type:"warning"}).then((function(){n("reset",t)})).catch((function(){}))}var u=null,l=!1;function s(){u&&(l=!0,clearTimeout(u)),u=setTimeout((function(){l||n("click"),clearTimeout(u),l=!1,u=null}),200)}return function(t,n){return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",{class:Object(r["normalizeClass"])(["memo-card radius memo-icon",{active:o.info.checked,empty:o.info.isEmpty,uploaded:Object(r["unref"])(c),edit:Object(r["unref"])(a),"num-cover":Object(r["unref"])(c)||Object(r["unref"])(a)}]),onClick:s},[e.info.assetid&&e.info.localtion?(Object(r["openBlock"])(),Object(r["createElementBlock"])("a",{key:0,href:"ibooks://assetid/".concat(e.info.assetid,"#").concat(e.info.localtion),class:"book-mark",onClick:n[0]||(n[0]=Object(r["withModifiers"])((function(){}),["stop"])),title:"在 Apple Books 中查看"},null,8,Kt)):Object(r["createCommentVNode"])("",!0),Object(r["createElementVNode"])("div",{class:"num-icon","data-index":e.index+1,onClick:n[1]||(n[1]=function(e){return i(e,o.info)})},Object(r["toDisplayString"])(Object(r["unref"])(c)||Object(r["unref"])(a)?"":e.index+1),9,Zt),Object(r["createElementVNode"])("div",Xt,[Object(r["createElementVNode"])("pre",{innerHTML:e.info.content_update||e.info.content},null,8,Wt)])],2)}}});n("c8a0");const Yt=l()(Gt,[["__scopeId","data-v-01e2a9cd"]]);var Qt=Yt,$t=(n("466d"),{setDataConver:function(e){var t=this.browser();if(!(t["ie"]<9)){var n,r=e["data"],o="undefined"===typeof e["showLabel"]||e["showLabel"],c=(e["fileName"]||"UserExport")+".csv",a=e["columns"]||{title:[],key:[],formatter:void 0},i=(o="undefined"===typeof o||o,""),u="";if(o){if(a.title.length)a.title.map((function(e){i+=e+","}));else for(n in r[0])i+=n+",";i=i.slice(0,-1),u+=i+"\r\n"}r.map((function(e){if(i="",a.key.length)a.key.map((function(t){i+='"'+("function"===typeof a.formatter&&a.formatter(t,e[t])||e[t])+'",'}));else for(n in e)i+='"'+("function"===typeof a.formatter&&a.formatter(n,e[n])||e[n])+'",';i.slice(0,i.length-1),u+=i+"\r\n"})),u&&this.SaveAs(c,u)}},SaveAs:function(e,t){var n=this.browser();if(n["edge"]&&n["ie"])if(n["ie"]>=10||"edge"==n["edge"]){var r="\ufeff",o=new Blob([r+t],{type:"text/csv"});navigator.msSaveBlob(o,e)}else{var c=window.top.open("about:blank","_blank");c.document.write("sep=,\r\n"+t),c.document.close(),c.document.execCommand("SaveAs",!0,e),c.close()}else{var a=document.createElement("a");a.id="linkDwnldLink",a.href=this.getDownloadUrl(t),document.body.appendChild(a);var i=document.getElementById("linkDwnldLink");i.setAttribute("download",e),i.click(),document.body.removeChild(i)}},getDownloadUrl:function(e){var t="\ufeff";if(window.Blob&&window.URL&&window.URL.createObjectURL){e=new Blob([t+e],{type:"text/csv"});return URL.createObjectURL(e)}},browser:function(){var e,t={},n=navigator.userAgent.toLowerCase();return(e=-1!==n.indexOf("edge")?t.edge="edge":n.match(/rv:([\d.]+)\) like gecko/))||(e=n.match(/msie ([\d.]+)/))?t.ie=e[1]:(e=n.match(/firefox\/([\d.]+)/))?t.firefox=e[1]:(e=n.match(/chrome\/([\d.]+)/))?t.chrome=e[1]:(e=n.match(/opera.([\d.]+)/))?t.opera=e[1]:(e=n.match(/version\/([\d.]+).*safari/))&&(t.safari=e[1]),t}});function en(){return tn.apply(this,arguments)}function tn(){return tn=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n,r,o,c,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,g("books");case 2:return t=e.sent,t=(t||[]).map((function(e){return delete e.id,e.form&&(e.form=e.form,delete e.form),e})),console.log(t),e.next=7,g("notes");case 7:n=e.sent,n=(n||[]).map((function(e){return delete e.id,e.form&&(e.form=e.form,delete e.form),e})),r=JSON.stringify({from:"send2Flomo",books:t,notes:n}),o=new Blob([r],{type:"text/json"}),c=URL.createObjectURL(o),a=document.createElement("a"),a.href=c,a.download="send2Flomo-export.json",a.click(),URL.revokeObjectURL(c);case 17:case"end":return e.stop()}}),e)}))),tn.apply(this,arguments)}var nn={class:"content-box"},rn={key:0,class:"no-data"},on={class:"memo-box"},cn=Object(r["defineComponent"])({emits:["export"],setup:function(e,t){t.emit;var n=Object(c["b"])(),a=n.t,i=Object(_["b"])(),u=i.getters.isElectron;function l(e){switch(e){case"markdown":if(!O.value.length)return!1;h();break;case"csv":if(!O.value.length)return!1;j();break;case"alldata":en();break}}function s(e){e.uploaded||(e.checked=!e.checked,i.commit("UPDATE_TEXT_LIST",{uuid:e.uuid,checked:e.checked}))}function d(){return f.apply(this,arguments)}function f(){return f=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n,r,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=x.value,n=t.content_temp,r=t.uuid,o=t.content,n===o){e.next=7;break}return x.value.content=n,x.value.content_update=n,i.commit("UPDATE_TEXT_LIST",{uuid:r,content_update:n}),e.next=7,T(q(x.value));case 7:k();case 8:case"end":return e.stop()}}),e)}))),f.apply(this,arguments)}function b(e){return p.apply(this,arguments)}function p(){return p=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.uploaded=!1,t.content_update="",i.commit("UPDATE_TEXT_LIST",{uuid:t.uuid,content_update:"",uploaded:!1}),e.next=5,T(q(t));case 5:case"end":return e.stop()}}),e)}))),p.apply(this,arguments)}var O=Object(r["computed"])((function(){return i.getters.textList})),m=Object(r["computed"])((function(){return i.getters.parseOptions}));function j(){var e=m.value,t=e.options,n=e.tag,r=t.title,o=O.value.map((function(e){return{title:r,text:e.text.replace(/\r/g,"").replace(/\n/g,""),content_update:e.content_update.replace(/\r/g,"").replace(/\n/g,""),note:e.note||"",tag:n||"",form:e.form||""}}));$t.setDataConver({data:o,fileName:r,columns:{title:["书名","书摘","笔记","标签","修改内容"],key:["title","text","note","tag","content_update"]}})}function h(){var e=m.value,t=e.options,n=e.tag,r=t.title,o=O.value.reduce((function(e,t){var r=t.update_content||t.content;return e+"- ".concat(r.replace(t.note,"").replace(n,"").replace(/\r/g,"").replace(/\n/g,""),"\n\n")}),"# ".concat(r,"\n\n")),c=new Blob([o],{type:"text/markdown"}),a=URL.createObjectURL(c),i=document.createElement("a");i.href=a,i.download="".concat(r,".md"),i.click(),URL.revokeObjectURL(a)}var v=Object(r["ref"])(!1),x=Object(r["ref"])({});function g(e){e.uploaded||(x.value=e,v.value=!0)}function k(){x.value={},v.value=!1}return function(e,t){var n=Object(r["resolveComponent"])("el-input"),o=Object(r["resolveComponent"])("el-button"),c=Object(r["resolveComponent"])("el-dialog");return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",{class:Object(r["normalizeClass"])(["right-content",{electron:Object(r["unref"])(u)}])},[Object(r["createVNode"])(Object(r["unref"])(Jt),{class:Object(r["normalizeClass"])({"right-content-position":Object(r["unref"])(u)}),onExport:l},null,8,["class"]),Object(r["createElementVNode"])("div",nn,[Object(r["unref"])(O).length?Object(r["createCommentVNode"])("",!0):(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",rn)),Object(r["createElementVNode"])("div",on,[(Object(r["openBlock"])(!0),Object(r["createElementBlock"])(r["Fragment"],null,Object(r["renderList"])(Object(r["unref"])(O),(function(e,t){return Object(r["openBlock"])(),Object(r["createBlock"])(Object(r["unref"])(Qt),{onDblclick:function(t){return g(e)},onClick:function(t){return s(e)},onReset:function(t){return b(e)},key:e.uuid,class:"memo-item",info:e,index:t},null,8,["onDblclick","onClick","onReset","info","index"])})),128))])]),Object(r["createVNode"])(c,{modelValue:v.value,"onUpdate:modelValue":t[1]||(t[1]=function(e){return v.value=e}),center:"",width:"600px","show-close":!1,"close-on-click-modal":!1,"close-on-press-escape":!1},{footer:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(o,{onClick:k,size:"mini",type:"default"},{default:Object(r["withCtx"])((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(Object(r["unref"])(a)("cancel")),1)]})),_:1}),Object(r["createVNode"])(o,{onClick:d,size:"mini",type:"primary"},{default:Object(r["withCtx"])((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(Object(r["unref"])(a)("save")),1)]})),_:1})]})),default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(n,{modelValue:x.value.content_temp,"onUpdate:modelValue":t[0]||(t[0]=function(e){return x.value.content_temp=e}),type:"textarea",autosize:{minRows:16,maxRows:36},placeholder:"",clearable:""},null,8,["modelValue"])]})),_:1},8,["modelValue"])],2)}}});n("16b5");const an=l()(cn,[["__scopeId","data-v-68647881"]]);var un=an;function ln(e,t){var n={content:t};return he.a.post(e,n)}var sn={class:"content-wrap"},dn=Object(r["defineComponent"])({setup:function(e){var t=Object(_["b"])(),n=JSON.parse(localStorage.getItem("bookSort")||"[]").reverse();J(n);var c=t.getters.isElectron,a=Object(r["computed"])((function(){return t.getters.importCount})),i=Object(r["computed"])((function(){return t.getters.selectedList})),u=Object(r["ref"])(""),l=Object(r["ref"])(0),s=Object(r["ref"])(0),f=Object(r["computed"])((function(){return"为减轻服务器压力，导入间隔为 1s。导入进度： ".concat(l.value+1,"/").concat(s.value)})),b=Object(r["ref"])(null);function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";s.value=i.value.length,b.value=pe["a"].service({lock:!0,text:f}),l.value=0,O(e,i.value,l.value)}function O(e,t,n){return m.apply(this,arguments)}function m(){return m=Object(o["a"])(regeneratorRuntime.mark((function e(n,r,o){var c,i,u,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return b.value.setText(f),e.prev=1,c=r[o],e.next=5,ln(n,c.content_update||c.content);case 5:if(i=e.sent,u=i.code,s=i.message,0!==u){e.next=19;break}return c.uploaded=!0,c.checked=!1,c.content_update=c.content,t.commit("SET_IMPORT_COUNT",a.value+1),t.commit("UPDATE_TEXT_LIST",{uuid:c.uuid,uploaded:!0,checked:!1,content_update:c.content}),e.next=16,T(q(c));case 16:o<r.length-1?setTimeout((function(){l.value+=1,O(n,r,l.value)}),1e3):(b.value.close(),Oe["a"].success(s)),e.next=20;break;case 19:Oe["a"].error(s);case 20:e.next=26;break;case 22:e.prev=22,e.t0=e["catch"](1),Oe["a"].error("导入失败"),b.value.close();case 26:case"end":return e.stop()}}),e,null,[[1,22]])}))),m.apply(this,arguments)}function j(e){t.commit("UPDATE_PARSE_OPTIONS",{options:e,tag:u.value})}function h(e){e.list;var n=e.options;t.commit("UPDATE_PARSE_OPTIONS",{options:n,tag:u.value})}function v(e){u.value=e}return function(e,t){return Object(r["openBlock"])(),Object(r["createElementBlock"])(r["Fragment"],null,[Object(r["unref"])(c)?(Object(r["openBlock"])(),Object(r["createBlock"])(Object(r["unref"])(d),{key:0,class:"the-head"})):Object(r["createCommentVNode"])("",!0),Object(r["createElementVNode"])("div",sn,[Object(r["createVNode"])(Object(r["unref"])(mt),{class:"left-bar",ref:function(e,t){t["leftContent"]=e},onSubmit:p,onParse:j,onListUpdate:h,onUpdateTag:v},null,512),Object(r["createVNode"])(Object(r["unref"])(un),{class:"right-content"})])],64)}}});n("c19a");const fn=dn;var bn=fn,pn=n("1250"),On=(n("f930"),n("5893")),mn={};function jn(){var e={};return hn(mn,e),e}function hn(e,t){for(var n in e)if(e[n].default){var r=n.substr(n.lastIndexOf("/")+1,5);t[r]?t[r]=Object(f["a"])(Object(f["a"])({},e[r]),e[n].default):t[r]=e[n].default}}On.keys().forEach((function(e){mn[e]=On(e)}));var vn=window.localStorage.getItem("locale")||"zh-CN",xn=Object(c["a"])({legacy:!1,locale:vn,messages:jn()}),gn=xn,kn=(n("9536"),Object(r["createApp"])(bn));kn.use(pn["a"]),kn.use(gn),kn.use(B),kn.mount("#app");t["default"]=kn},f197:function(e,t,n){"use strict";n.r(t),t["default"]={parse:"Parse","how-export":"How to export HTML?","questions-and-answers":"Questions and Answers",weread:"WeRead","parse-options":"Parse Options","hide-tag":"Hide Tag","position-of-tag":"Position Of Tag",top:"Top",bottom:"Bottom",on:"On",off:"OFF","book-name":"Book Name","book-list":"Book List",import:"Import","api-options":"Api Options","tag-options":"Tag Options","notes-options":"Notes Options","reading-notes":"reading","upload-file":"Upload HTML/TXT/JSON",thanks:"Thanks for lupeng",all:"All","not-all":"DESELECT ALL","check-update":"Check Update",blog:"Blog",jike:"JIKE",help:"Help",save:"Save",cancel:"Cancel"}},f76e:function(e,t,n){},f930:function(e,t,n){},ff2a:function(e,t,n){}});