(function(e){function t(t){for(var o,a,i=t[0],l=t[1],u=t[2],d=0,f=[];d<i.length;d++)a=i[d],Object.prototype.hasOwnProperty.call(c,a)&&c[a]&&f.push(c[a][0]),c[a]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(e[o]=l[o]);s&&s(t);while(f.length)f.shift()();return r.push.apply(r,u||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],o=!0,i=1;i<n.length;i++){var l=n[i];0!==c[l]&&(o=!1)}o&&(r.splice(t--,1),e=a(a.s=n[0]))}return e}var o={},c={app:0},r=[];function a(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=o,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)a.d(n,o,function(t){return e[t]}.bind(null,o));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var s=l;r.push([1,"chunk-vendors"]),n()})({0:function(e,t){},"04b3":function(e,t,n){},1:function(e,t,n){e.exports=n("cd49")},10:function(e,t){},11:function(e,t){},12:function(e,t){},13:function(e,t){},14:function(e,t){},15:function(e,t){},16:function(e,t){},17:function(e,t){},18:function(e,t){},"1a12":function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="1a12"},"1c26":function(e,t,n){var o={"./build":"f885","./build.js":"f885","./clean":"f83a","./clean.js":"f83a","./configure":"8f0e","./configure.js":"8f0e","./info":"53b3","./info.js":"53b3","./install":"3b09","./install.js":"3b09","./node-pre-gyp":"95bb","./node-pre-gyp.js":"95bb","./package":"42e9","./package.js":"42e9","./pre-binding":"c2bf","./pre-binding.js":"c2bf","./publish":"96ac","./publish.js":"96ac","./rebuild":"efb3","./rebuild.js":"efb3","./reinstall":"39b2","./reinstall.js":"39b2","./reveal":"4997","./reveal.js":"4997","./testbinary":"5c9e","./testbinary.js":"5c9e","./testpackage":"4791","./testpackage.js":"4791","./unpublish":"012f","./unpublish.js":"012f","./util/abi_crosswalk":"63e9","./util/abi_crosswalk.json":"63e9","./util/compile":"99ca","./util/compile.js":"99ca","./util/handle_gyp_opts":"b608","./util/handle_gyp_opts.js":"b608","./util/napi":"3d34","./util/napi.js":"3d34","./util/nw-pre-gyp/index.html":"a716","./util/nw-pre-gyp/package":"4ca4","./util/nw-pre-gyp/package.json":"4ca4","./util/s3_setup":"606e","./util/s3_setup.js":"606e","./util/versioning":"f3dc","./util/versioning.js":"f3dc"};function c(e){var t=r(e);return n(t)}function r(e){if(!n.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}c.keys=function(){return Object.keys(o)},c.resolve=r,e.exports=c,c.id="1c26"},2:function(e,t){},"254e":function(e,t,n){"use strict";n("ff2a")},3:function(e,t){},3631:function(e,t,n){},4:function(e,t){},"4a26":function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="4a26"},5:function(e,t){},5893:function(e,t,n){var o={"./en-US.ts":"f197","./zh-CN.ts":"a8b7"};function c(e){var t=r(e);return n(t)}function r(e){if(!n.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}c.keys=function(){return Object.keys(o)},c.resolve=r,e.exports=c,c.id="5893"},"5b9d":function(e,t,n){var o={"./Find-VS2017.cs":"c3f6","./build":"c22b","./build.js":"c22b","./clean":"1910","./clean.js":"1910","./configure":"c0a3","./configure.js":"c0a3","./find-node-directory":"3265","./find-node-directory.js":"3265","./find-vs2017":"d3f3","./find-vs2017.js":"d3f3","./install":"1eed","./install.js":"1eed","./list":"7777","./list.js":"7777","./node-gyp":"a9a0","./node-gyp.js":"a9a0","./process-release":"4e82","./process-release.js":"4e82","./rebuild":"626c","./rebuild.js":"626c","./remove":"bcf9","./remove.js":"bcf9"};function c(e){var t=r(e);return n(t)}function r(e){if(!n.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}c.keys=function(){return Object.keys(o)},c.resolve=r,e.exports=c,c.id="5b9d"},6:function(e,t){},"623a":function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="623a"},6659:function(e,t,n){"use strict";n("3631")},7:function(e,t){},8:function(e,t){},"83fc":function(e,t,n){"use strict";n("a642")},9:function(e,t){},9460:function(e,t,n){"use strict";n("e5ee")},9536:function(e,t,n){},a642:function(e,t,n){},a8b7:function(e,t,n){"use strict";n.r(t),t["default"]={parse:"解析","how-export":"如何导出 HTML？","where-is--my-clippings":"My Clippings.txt 在哪？",weread:"微信读书","parse-options":"解析设置","hide-tag":"隐藏 Tag","position-of-tag":"位置",top:"顶部",bottom:"底部",on:"启用",off:"禁用","book-name":"书名","book-list":"书籍列表",import:"导入","api-options":"Api 设置","tag-options":"Tag 设置","notes-options":"笔记设置","reading-notes":"正在读取","upload-file":"上传 HTML/TXT 文件",thanks:"感谢 lupeng",all:"全选","check-update":"检查更新",blog:"博客",jike:"即刻",help:"帮助"}},a963:function(e,t,n){"use strict";n("aec3")},aec3:function(e,t,n){},c7b3:function(e,t,n){n("a15b");var o=n("fc0d").verbose(),c=n("df7c"),r=function(e,t){return new o.Database(c.join(e,t))};e.exports={db:r}},cd49:function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("7a23"),c=(n("99af"),n("d81d"),n("ac1f"),n("5319"),n("47e2")),r={class:"the-head"},a=Object(o["defineComponent"])({setup:function(e){var t=Object(c["b"])();t.t,t.locale,Object(o["ref"])(!1);return function(e,t){return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",r)}}}),i=(n("254e"),n("6b0d")),l=n.n(i);const u=l()(a,[["__scopeId","data-v-449b818b"]]);var s=u,d=n("2909"),f=n("3835"),b=n("5530"),p=(n("7db0"),n("d3b7"),n("3ca3"),n("ddb0"),n("1276"),n("b0c0"),n("498a"),n("a630"),n("a15b"),n("4de4"),n("53ca"));n("159b"),n("c740");function O(e){var t=Object(p["a"])(e);return"function"===t||"object"===t&&!!e}function j(e){if(!O(e))return e;for(var t,n,o=1,c=arguments.length;o<c;o++)for(n in t=arguments[o],t)e[n]=t[n];return e}function m(e){return-1!==e.indexOf("标注")||-1!==e.indexOf("Highlight")?1:(-1!==e.indexOf("笔记")||-1!==e.indexOf("备注")||-1!==e.indexOf("书签")||e.indexOf("Bookmark"),2)}var h={split_created:function(e){e=e.split("|").map((function(e){return e.trim()}));try{var t=e[0].substr(2),n=t.replace(/[^0-9]/gi,""),o=m(t);return{type:o,position:1===o?t:n,note:""}}catch(c){return{note:"",position:"",date:""}}},split_book:function(e){e=e.replace(/（/g,"(").replace(/）/g,")");try{var t=/(.+)\((.+)\)/,n=t.exec(e);return n?{book:n[1].trim(),author:n[2].trim()}:{book:e,author:""}}catch(o){console.log(o)}}};function v(e){this.position="",this.book="",this.author="",this.date=null,this.content="",this.texts=e,this.type="",this.init()}function g(e){e=e.split("==========").filter((function(e){return e}));var t=[],n=[];e.map(x).forEach((function(e){e&&(1===e.type&&e.content&&n.push(e),2===e.type&&e.content&&t.push(e))})),t.forEach((function(e){var t=n.findIndex((function(t){return-1!==t.position.indexOf(e.position)}));-1!==t&&(n[t].note=e.content)}));var o=[];return n.forEach((function(e){var t=o.findIndex((function(t){return t.title===e.book}));-1!==t?o[t].texts.push({text:e.content,note:e.note,checked:!1,isEdit:!1}):o.push({title:e.book,texts:[{text:e.content,note:e.note,checked:!1,isEdit:!1}]})})),o.reverse()}function x(e){return e=e.trim(),e?new v(e):null}v.prototype.init=function(){var e=this.texts.replace(/^(\n|\r)*/g,"").replace(/(\n|\r)*$/g,"").split("\r\n").filter((function(e){return e&&"\n"!==e&&"\r"!==e})),t=null;t=h.split_book(e[0]),j(this,t),e[1]&&(t=h.split_created(e[1]),j(this,t)),this.content=e[2],t=null};var k=g,N=n("1431");function w(e){var t=e.replace(/\n|\r/g,""),n=N.load(t);n("h3.noteHeading").length&&(t=t.replace(/<\/h3>/g,"</div>").replace(/<\/div><div class='noteText'>/g,"</h3><div class='noteText'>"),n=N.load(t));var o=n(".bookTitle")[0],c=n(o).text().trim(),r=[],a=Array.from(n(".noteText")),i=[];while(a.length){var l=a.pop(),u=m(l.prev.children[0].data),s=l.children.filter((function(e){return"text"===e.type})).map((function(e){return e.data.trim()})).join("");2===u&&i.push(s),1===u&&r.unshift({text:s,note:i.pop()||"",checked:!1,isEdit:!1})}return{title:c,texts:r}}var E=w,V=n("1da1"),C=(n("96cf"),n("fb6a"),{}),T={},y={},_=function(){},S=function(){return Promise.resolve([])};Object({NODE_ENV:"production",BASE_URL:""}).IS_ELECTRON&&(C=n("3e8f"),T=n("3c43"),y=n("7781"),_=n("c7b3").db,S=function(){var e=T.homedir(),t="/Library/Containers/com.apple.iBooksX/Data/Documents/AEAnnotation/",n="";try{n=C.readdirSync("".concat(e).concat(t))}catch(r){return Promise.reject("未发现笔记文件")}var o=n.find((function(e){return"sqlite"===e.slice(-6).toLowerCase()}));if(!o)return Promise.reject("未发现笔记文件");var c=_("".concat(e).concat(t),o);return new Promise((function(t,n){c.all("\n          SELECT\n              ZANNOTATIONREPRESENTATIVETEXT as BroaderText,\n              ZANNOTATIONSELECTEDTEXT as SelectedText,\n              ZANNOTATIONNOTE as Note,\n              ZFUTUREPROOFING5 as Chapter,\n              ZANNOTATIONCREATIONDATE as Created,\n              ZANNOTATIONMODIFICATIONDATE as Modified,\n              ZANNOTATIONASSETID\n          FROM ZAEANNOTATION\n          WHERE ZANNOTATIONSELECTEDTEXT IS NOT NULL\n          AND ZANNOTATIONDELETED = 0\n          ORDER BY ZANNOTATIONASSETID ASC, ZPLLOCATIONRANGESTART ASC\n        ",function(){var o=Object(V["a"])(regeneratorRuntime.mark((function o(c,a){var i,l,u,s;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(c){o.next=21;break}return i="".concat(e,"/Library/Containers/com.apple.BKAgentService/Data/Documents/iBooks/Books/Books.plist"),l={},u=[],o.prev=4,o.next=7,y.parseFile(i);case 7:s=o.sent,l=s[0],u=l.Books,o.next=16;break;case 12:o.prev=12,o.t0=o["catch"](4),console.log(o.t0),n("图书列表解析出错");case 16:try{a.forEach((function(e){var t=u.findIndex((function(t){return t.BKGeneratedItemId===e.ZANNOTATIONASSETID}));if(t>=0){var n={text:e.SelectedText,note:e.Note,checked:!1,isEdit:!1};try{u[t].texts.push(n)}catch(r){u[t].texts=[],u[t].texts.push(n)}}}))}catch(r){console.log(r)}a.length&&t(u.filter((function(e){return e.texts})).map((function(e){return{title:e.BKDisplayName,texts:e.texts}}))),t(u.map((function(e){return{title:e.BKDisplayName,texts:[]}}))),o.next=22;break;case 21:n("笔记解析出错");case 22:case"end":return o.stop()}}),o,null,[[4,12]])})));return function(e,t){return o.apply(this,arguments)}}())}))});var D=S,L=n("4995"),B=n("5a79"),A=n("bc3a"),I=n.n(A);function U(){return new Promise((function(e,t){try{var o=n("daba"),c=o.session;c.defaultSession.cookies.get({url:"https://weread.qq.com/"}).then((function(n){if(n&&n.length){var o=n.find((function(e){return"wr_vid"===e.name}));o&&e(o.value),t(!1)}t(!1)}))}catch(r){console.log(r),t(!1)}}))}I.a.defaults.baseURL="https://i.weread.qq.com";var M={Host:"i.weread.qq.com",Connection:"keep-alive","Upgrade-Insecure-Requests":1,"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.103 Safari/537.36",Accept:"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3","Accept-Encoding":"gzip, deflate, br","Accept-Language":"zh-CN,zh;q=0.9,en;q=0.8"};I.a.interceptors.request.use((function(e){return Object(b["a"])({},e)}),(function(e){return Promise.reject(e)})),I.a.interceptors.response.use((function(e){return e.data}),(function(e){var t=e.response;if(t)return console.log(t.statusText,t.data&&t.data.errmsg),Promise.reject(t.data);console.log("something wrong")}));var P=function(e){return I()({method:"get",url:"/book/bookmarklist",headers:M,params:{bookId:e}})},R=function(){var e=Object(V["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U().catch((function(e){console.log(e)}));case 2:if(t=e.sent,t){e.next=5;break}return e.abrupt("return",Promise.reject(401));case 5:return e.abrupt("return",I()({method:"get",headers:M,url:"/user/notebooks"}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),F=function(){var e=Object(V["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U().catch((function(e){}));case 2:return n=e.sent,e.abrupt("return",I()({method:"get",url:"/web/review/list",baseURL:"https://weread.qq.com",headers:M,params:Object(b["a"])({userVid:n},t)}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function q(){var e=n("daba"),t=e.session;return new Promise((function(e,n){t.defaultSession.cookies.get({url:"https://weread.qq.com/"}).then((function(o){try{for(var c=0;c<o.length;c++)t.defaultSession.cookies.remove("https://weread.qq.com/",o[c].name,(function(e){console.log("cookie 清除出错")}));e()}catch(r){n()}})).catch((function(){return n()}))}))}function z(){return new Promise((function(e,t){R().then((function(t){var n=t.books.map((function(e){return{title:e.book.title,loaded:!1,bookId:e.bookId,texts:[]}})).reverse();e(n)})).catch((function(e){401===e&&q(),t(e)}))}))}function Z(e){return new Promise((function(t,n){P(e).then((function(e){var n=e.updated.map((function(e){return{text:e.markText,note:"",checked:!1,isEdit:!1}}));t(n)})).catch((function(e){n(e)}))}))}function H(e){return new Promise((function(t,n){F(e).then((function(e){var n=e.reviews.map((function(e){return{text:e.review.abstract,note:e.review.content||"",checked:!1,isEdit:!1}}));t(n)})).catch((function(e){n(e)}))}))}var J=n("5502"),X=function(e){return Object(o["pushScopeId"])("data-v-5e0fe90a"),e=e(),Object(o["popScopeId"])(),e},K={class:"left-bar-form"},W={class:"left-bar-form-content"},G={class:"left-bar-form-content-top"},Y={class:"upload-content radius flex pd-10 border"},$=X((function(){return Object(o["createElementVNode"])("i",{class:"el-icon-folder-add"},null,-1)})),Q={class:"el-upload__text"},ee={class:"how"},te=X((function(){return Object(o["createElementVNode"])("i",{class:"el-icon-question"},null,-1)})),ne={class:"mr-10",href:"https://mp.weixin.qq.com/s/CPIYoGItJVWJGk30MoVNXA",target:"_blank"},oe=X((function(){return Object(o["createElementVNode"])("div",null,[Object(o["createElementVNode"])("div",{class:"pb-10"}," 将 Kindle 通过数据线连接至电脑 "),Object(o["createElementVNode"])("div",null," 文件位于：Kindle根目录 - document - My Clippings.txt ")],-1)})),ce={class:"pointer"},re={class:"flex thired-import"},ae={class:"pointer text-center border pd-10 radius"},ie=X((function(){return Object(o["createElementVNode"])("div",{slot:"content",style:{"line-height":"1.5em"}},[Object(o["createElementVNode"])("b",null,"点击下载应用"),Object(o["createElementVNode"])("br"),Object(o["createTextVNode"])(" 由于 Apple Books 与微信读书笔记的读取方式限制， "),Object(o["createElementVNode"])("br"),Object(o["createTextVNode"])(" 必须安装客户端才能使用。 ")],-1)})),le=X((function(){return Object(o["createElementVNode"])("a",{href:"https://github.com/Tit1e/kindle2Flomo/releases",target:"_blank"}," 从 Apple Books / 微信读书 导入 ",-1)})),ue=X((function(){return Object(o["createElementVNode"])("a",{class:"how",href:"https://evolly.one/2021/05/30/158-mac-handle-bad-app/",target:"_blank"}," Send2Flomo.app 打不开？ ",-1)})),se={class:"left-bar-form-content-body"},de=X((function(){return Object(o["createElementVNode"])("i",{class:"el-icon-set-up mr-4"},null,-1)})),fe={class:"flex"},be={class:"flex-1"},pe={class:"flex-1 pl-10"},Oe=Object(o["createTextVNode"])("摘录上方"),je=Object(o["createTextVNode"])("摘录下方"),me=X((function(){return Object(o["createElementVNode"])("span",{class:"fz-12"},[Object(o["createElementVNode"])("b",{class:"highlight"},"仅在有笔记时生效"),Object(o["createTextVNode"])("，且总在笔记与摘录之间")],-1)})),he=X((function(){return Object(o["createElementVNode"])("i",{class:"el-icon-notebook-2 mr-4"},null,-1)})),ve={class:"list-wrap"},ge={class:"left-bar-bottom"},xe={style:{"margin-left":"10px"}},ke={class:"iframe-box"},Ne={key:0,src:"https://weread.qq.com/#login",frameborder:"0"},we={class:"text-center"},Ee=Object(o["createTextVNode"])("取消"),Ve=Object(o["createTextVNode"])("我已登录"),Ce=Object(o["defineComponent"])({emits:["update-tag","parse","submit","list-update"],setup:function(e,t){var n=t.expose,r=t.emit,a=Object(c["b"])(),i=a.t,l=Object(J["b"])(),u=Object(o["computed"])((function(){return l.getters.selectedList})),s=Object(o["computed"])((function(){return l.getters.importCount>=100})),p=l.getters.isElectron,O=Object(o["ref"])([]),j=Object(o["reactive"])({book:"",title:"",split:"",tag:"kindle",api:"",noTag:!1,tagPosition:!1,notePosition:!1,noEmptyLine:!0}),m=Object(o["ref"])("1");Object(o["watch"])((function(){return m.value}),(function(e){window.localStorage.setItem("activeName",e)}));var h=Object(o["computed"])((function(){return!u.value.length||!j.api||s.value}));function v(){var e=JSON.parse(localStorage.getItem("options")||"{}");j=Object(o["reactive"])(Object(b["a"])(Object(b["a"])({},j),e)),m.value=window.localStorage.getItem("activeName")||"1"}function g(e){var t=O.value.find((function(t){return t.title===e}));if(!t)return!1;if(t.bookId&&!t.loaded){var n=H({bookId:t.bookId,listType:11,maxIdx:0,count:0,listMode:2,synckey:0,mine:1}),o=Z(t.bookId);Promise.all([n,o]).then((function(e){var n=Object(f["a"])(e,2),o=n[0],c=n[1];t.texts=[].concat(Object(d["a"])(o),Object(d["a"])(c)),t.loaded=!0,N(t)})).catch((function(e){console.log(e)}))}else N(t)}function x(e){O.value=e.reverse();var t=e[0];t.bookId&&g(t.title),j.book=t.title,N(t)}function N(e){var t=e.title,n=e.texts,o=e.bookId;j.title=t,U(),n.length||o?(r("list-update",{list:n,options:j}),_(!0)):L["a"].warning("未发现有效内容")}v(),Object(o["watch"])((function(){return j}),(function(){U(),_()}),{deep:!0});var w=Object(o["ref"])(!1),V=Object(o["ref"])(!1);function C(){z().then((function(e){w.value=!1,V.value=!1,x(e)})).catch((function(e){console.log(e),V.value=!1}))}function T(){w.value=!0,V.value=!0,setTimeout(C,300)}function y(){var e=B["a"].service({body:!0,lock:!0,text:i("reading-notes")});D().then((function(t){try{setTimeout((function(){x(t),e.close()}),500)}catch(n){e.close()}})).catch((function(t){L["a"].error(t),e.close()}))}function _(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e&&(m.value="2"),A(),r("parse",j)}function S(){r("submit",j.api)}function A(){var e=j,t=e.noTag,n=e.api,o=e.tag,c=e.split,r=e.tagPosition,a=e.noEmptyLine,i={noTag:t,api:n,tag:o,split:c,tagPosition:r,noEmptyLine:a};localStorage.setItem("options",JSON.stringify(i))}var I=Object(o["ref"])("");function U(){var e="",t=j,n=t.tag,o=t.title,c=t.noTag;if(c)return r("update-tag",e),I.value=e,!1;e=n?"#".concat(n,"/").concat(o):"#".concat(o),r("update-tag",e),I.value=e}function M(){O.value=[]}function P(){document.querySelector("#fileSelect input").addEventListener("change",(function(e){M();var t=e.target.files[0],n=t.name.split(".").pop().toLowerCase(),o=new FileReader;o.onload=function(){if("txt"===n){O.value=k(o.result);try{var e=O.value[0];j.book=e.title,N(e)}catch(c){}}if("html"===n){var t=E(o.result);O.value=[t],j.book=t.title,N(t)}},o.readAsText(t)}))}function R(){return j.title}return Object(o["onMounted"])((function(){P()})),n({exportCSV:R}),function(e,t){var n=Object(o["resolveComponent"])("el-upload"),c=Object(o["resolveComponent"])("el-tooltip"),r=Object(o["resolveComponent"])("el-form-item"),a=Object(o["resolveComponent"])("el-divider"),l=Object(o["resolveComponent"])("el-input"),u=Object(o["resolveComponent"])("el-checkbox"),d=Object(o["resolveComponent"])("el-radio-button"),f=Object(o["resolveComponent"])("el-radio-group"),b=Object(o["resolveComponent"])("el-collapse-item"),v=Object(o["resolveComponent"])("el-radio"),x=Object(o["resolveComponent"])("el-collapse"),k=Object(o["resolveComponent"])("el-form"),N=Object(o["resolveComponent"])("el-button"),E=Object(o["resolveComponent"])("el-dialog"),_=Object(o["resolveDirective"])("loading");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{class:Object(o["normalizeClass"])(["left-bar",{"pt-10":!Object(o["unref"])(p),electron:Object(o["unref"])(p)}])},[Object(o["createElementVNode"])("div",K,[Object(o["createVNode"])(k,{model:Object(o["unref"])(j),ref:function(e,t){t["form"]=e},size:"mini","label-suffix":"：","label-position":"top"},{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("div",W,[Object(o["createElementVNode"])("div",G,[Object(o["createVNode"])(r,{"label-width":"0"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(n,{id:"fileSelect",style:{width:"100%"},"show-file-list":!1,multiple:!1,action:"","auto-upload":!1,accept:".html,.txt"},{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("div",Y,[$,Object(o["createElementVNode"])("div",Q,Object(o["toDisplayString"])(Object(o["unref"])(i)("upload-file")),1)])]})),_:1}),Object(o["createElementVNode"])("div",ee,[te,Object(o["createElementVNode"])("a",ne,Object(o["toDisplayString"])(Object(o["unref"])(i)("how-export")),1),Object(o["createVNode"])(c,{effect:"dark",placement:"right"},{content:Object(o["withCtx"])((function(){return[oe]})),default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("span",ce,Object(o["toDisplayString"])(Object(o["unref"])(i)("where-is--my-clippings")),1)]})),_:1})])]})),_:1}),Object(o["unref"])(p)?(Object(o["openBlock"])(),Object(o["createBlock"])(r,{key:0,"label-width":"0"},{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("div",re,[Object(o["createElementVNode"])("div",{class:"pointer text-center border pd-10 radius flex-item",onClick:y}," Apple Books "),Object(o["createElementVNode"])("div",{class:"pointer text-center border pd-10 radius flex-item",onClick:T},Object(o["toDisplayString"])(Object(o["unref"])(i)("weread")),1)])]})),_:1})):(Object(o["openBlock"])(),Object(o["createBlock"])(r,{key:1,"label-width":"0"},{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("div",ae,[Object(o["createVNode"])(c,{effect:"dark",placement:"right"},{content:Object(o["withCtx"])((function(){return[ie]})),default:Object(o["withCtx"])((function(){return[le]})),_:1})]),ue]})),_:1}))]),Object(o["createElementVNode"])("div",se,[Object(o["createVNode"])(x,{modelValue:Object(o["unref"])(m),"onUpdate:modelValue":t[9]||(t[9]=function(e){return Object(o["isRef"])(m)?m.value=e:m=e}),accordion:""},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(b,{name:"1"},{title:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("div",null,[de,Object(o["createTextVNode"])(Object(o["toDisplayString"])(Object(o["unref"])(i)("parse-options")),1)])]})),default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(a,null,{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(Object(o["unref"])(i)("api-options")),1)]})),_:1}),Object(o["createVNode"])(r,{label:"","label-width":"0px"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(l,{modelValue:Object(o["unref"])(j).api,"onUpdate:modelValue":t[0]||(t[0]=function(e){return Object(o["unref"])(j).api=e}),type:"password","show-password":"",placeholder:"API 采用本地存储"},null,8,["modelValue"])]})),_:1}),Object(o["createVNode"])(a,null,{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(Object(o["unref"])(i)("tag-options")),1)]})),_:1}),Object(o["createVNode"])(r,{label:"Tag"},{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("div",fe,[Object(o["createElementVNode"])("div",be,[Object(o["createVNode"])(l,{modelValue:Object(o["unref"])(j).tag,"onUpdate:modelValue":t[1]||(t[1]=function(e){return Object(o["unref"])(j).tag=e}),disabled:Object(o["unref"])(j).noTag,placeholder:"Tag 名称",clearable:""},null,8,["modelValue","disabled"])]),Object(o["createElementVNode"])("div",pe,[Object(o["createVNode"])(u,{modelValue:Object(o["unref"])(j).noTag,"onUpdate:modelValue":t[2]||(t[2]=function(e){return Object(o["unref"])(j).noTag=e})},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(Object(o["unref"])(i)("hide-tag")),1)]})),_:1},8,["modelValue"])])])]})),_:1}),Object(o["unref"])(j).noTag?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],{key:0},[Object(o["createVNode"])(r,{label:Object(o["unref"])(i)("position-of-tag")},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(f,{modelValue:Object(o["unref"])(j).tagPosition,"onUpdate:modelValue":t[3]||(t[3]=function(e){return Object(o["unref"])(j).tagPosition=e})},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(d,{label:!0},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(Object(o["unref"])(i)("top")),1)]})),_:1}),Object(o["createVNode"])(d,{label:!1},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(Object(o["unref"])(i)("bottom")),1)]})),_:1})]})),_:1},8,["modelValue"])]})),_:1},8,["label"]),Object(o["createVNode"])(r,{label:"空行"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(f,{modelValue:Object(o["unref"])(j).noEmptyLine,"onUpdate:modelValue":t[4]||(t[4]=function(e){return Object(o["unref"])(j).noEmptyLine=e})},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(d,{label:!1},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(Object(o["unref"])(i)("on")),1)]})),_:1}),Object(o["createVNode"])(d,{label:!0},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(Object(o["unref"])(i)("off")),1)]})),_:1})]})),_:1},8,["modelValue"])]})),_:1})],64)),Object(o["createVNode"])(a,null,{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(Object(o["unref"])(i)("notes-options")),1)]})),_:1}),Object(o["createVNode"])(r,{label:"位置"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(f,{modelValue:Object(o["unref"])(j).notePosition,"onUpdate:modelValue":t[5]||(t[5]=function(e){return Object(o["unref"])(j).notePosition=e})},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(d,{label:!0},{default:Object(o["withCtx"])((function(){return[Oe]})),_:1}),Object(o["createVNode"])(d,{label:!1},{default:Object(o["withCtx"])((function(){return[je]})),_:1})]})),_:1},8,["modelValue"])]})),_:1}),Object(o["createVNode"])(r,{label:"分隔符"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(l,{modelValue:Object(o["unref"])(j).split,"onUpdate:modelValue":t[6]||(t[6]=function(e){return Object(o["unref"])(j).split=e}),placeholder:"为空以空行填充，此空行无法禁用",clearable:""},null,8,["modelValue"]),me]})),_:1})]})),_:1}),Object(o["createVNode"])(b,{name:"2"},{title:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("div",null,[he,Object(o["createTextVNode"])(Object(o["toDisplayString"])(Object(o["unref"])(i)("book-list")),1)])]})),default:Object(o["withCtx"])((function(){return[O.value.length?(Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],{key:0},[Object(o["createVNode"])(r,{label:Object(o["unref"])(i)("book-name")},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(l,{modelValue:Object(o["unref"])(j).title,"onUpdate:modelValue":t[7]||(t[7]=function(e){return Object(o["unref"])(j).title=e})},null,8,["modelValue"])]})),_:1},8,["label"]),Object(o["createVNode"])(r,{label:Object(o["unref"])(i)("book-list"),"label-width":"0"},{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("div",ve,[Object(o["createVNode"])(f,{class:"book-list",modelValue:Object(o["unref"])(j).book,"onUpdate:modelValue":t[8]||(t[8]=function(e){return Object(o["unref"])(j).book=e}),size:"small",onChange:g},{default:Object(o["withCtx"])((function(){return[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(O.value,(function(e){return Object(o["openBlock"])(),Object(o["createBlock"])(v,{label:e.title,border:""},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.title),1)]})),_:2},1032,["label"])})),256))]})),_:1},8,["modelValue"])])]})),_:1},8,["label"])],64)):Object(o["createCommentVNode"])("",!0)]})),_:1})]})),_:1},8,["modelValue"])])])]})),_:1},8,["model"])]),Object(o["createElementVNode"])("div",ge,[Object(o["unref"])(h)?(Object(o["openBlock"])(),Object(o["createBlock"])(c,{key:0,effect:"dark",disabled:!1,content:Object(o["unref"])(s)?"导入数量已达 100 条限额":"请确保 API 已填写，需要导入的 MEMO 已勾选",placement:"top"},{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("span",xe,[Object(o["createVNode"])(N,{type:"primary",disabled:Object(o["unref"])(h),size:"mini"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(Object(o["unref"])(i)("import")),1)]})),_:1},8,["disabled"])])]})),_:1},8,["content"])):(Object(o["openBlock"])(),Object(o["createBlock"])(N,{key:1,type:"primary",size:"mini",onClick:S},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(Object(o["unref"])(i)("import")),1)]})),_:1}))]),Object(o["createVNode"])(E,{"custom-class":"login-dialog",modelValue:w.value,"onUpdate:modelValue":t[11]||(t[11]=function(e){return w.value=e}),"close-on-click-modal":!1,"append-to-body":"","destroy-on-close":"",width:"270px"},{default:Object(o["withCtx"])((function(){return[Object(o["withDirectives"])(Object(o["createElementVNode"])("div",ke,[w.value?(Object(o["openBlock"])(),Object(o["createElementBlock"])("iframe",Ne)):Object(o["createCommentVNode"])("",!0)],512),[[_,V.value]]),Object(o["withDirectives"])(Object(o["createElementVNode"])("div",we,[Object(o["createVNode"])(N,{type:"text",style:{color:"#999999"},onClick:t[10]||(t[10]=function(e){return w.value=!1})},{default:Object(o["withCtx"])((function(){return[Ee]})),_:1}),Object(o["createVNode"])(N,{type:"text",onClick:C},{default:Object(o["withCtx"])((function(){return[Ve]})),_:1})],512),[[o["vShow"],!V.value]])]})),_:1},8,["modelValue"])],2)}}});n("6659");const Te=l()(Ce,[["__scopeId","data-v-5e0fe90a"]]);var ye=Te,_e=(n("b680"),function(e){return Object(o["pushScopeId"])("data-v-2a077942"),e=e(),Object(o["popScopeId"])(),e}),Se={class:"right-content-bar"},De={class:"flex-1 flex"},Le=_e((function(){return Object(o["createElementVNode"])("div",{style:{width:"200px","line-height":"1.5em"}}," 未经审视的生活不值得过，未经审视的思想也不应该汇入你的大脑。建议在导入前审视一遍内容。 ",-1)})),Be=Object(o["createTextVNode"])(" 已选择 "),Ae={class:"highlight"},Ie=Object(o["createTextVNode"])(" 条 MEMO，共 "),Ue={class:"highlight"},Me=Object(o["createTextVNode"])(" 条。今日已导入 "),Pe={class:"highlight"},Re=Object(o["createTextVNode"])(" 条 MEMO "),Fe={class:"bar-right"},qe={key:1,class:"thanks",href:"https://mp.weixin.qq.com/s/o793lUsBaWc61fLZzFDlxg",target:"_blank"},ze={class:"help-box"},Ze=_e((function(){return Object(o["createElementVNode"])("div",{class:"mb-10"},"注意事项：",-1)})),He=_e((function(){return Object(o["createElementVNode"])("div",{class:"mb-6"},"1. 导入前必须填写 Api 与选择要导入的 MEMO",-1)})),Je=_e((function(){return Object(o["createElementVNode"])("div",{class:"mb-6"},"2. 双击 MEMO 可进入编辑状态",-1)})),Xe=_e((function(){return Object(o["createElementVNode"])("div",{class:"mb-6"},"3. 修改配置项会触发解析",-1)})),Ke=_e((function(){return Object(o["createElementVNode"])("div",{class:"mb-6"},"4. 每次解析重置 MEMO 的内容，因此先设置好配置项再进行编辑",-1)})),We={key:0,class:"mb-6"},Ge=_e((function(){return Object(o["createElementVNode"])("div",{class:"mb-10"},"还有其他问题？扫码进群反馈",-1)})),Ye=_e((function(){return Object(o["createElementVNode"])("img",{class:"block block-center",width:"200",height:"200",src:"https://gblobscdn.gitbook.com/assets%2F-MVEe4qiW5TBO3wosktr%2F-McqOyO9scmhvjxOKjqy%2F-McqT6ENIJnzZEGJhoeX%2F%E5%9B%BE%E7%89%87.png?alt=media&token=a1a523d4-f926-4615-b1de-b6fced4c46ab"},null,-1)})),$e=["title"],Qe=_e((function(){return Object(o["createElementVNode"])("div",{class:"setting k-icon"},null,-1)})),et=Object(o["createTextVNode"])(" Tit1e's Photo Studio "),tt={href:"https://evolly.one",target:"_blank"},nt=_e((function(){return Object(o["createElementVNode"])("a",{href:"https://album.animalcrossing.life",target:"_blank"},"Tit1e's Photo Studio",-1)})),ot={href:"https://web.okjike.com/u/FFDB1E46-63DC-43BE-AA1A-36F3D9CD0017",target:"_blank"},ct=Object(o["defineComponent"])({emits:["export"],setup:function(e,t){var r=t.emit,a=Object(J["b"])(),i=a.getters.isElectron,l={},u={};function s(){r("export")}function d(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];a.commit("SELECT_ALL",e)}i&&(u=n("daba").shell,l=n("bdb9").ipcRenderer);var f=Object(c["b"])(),b=f.t,p=f.locale;function O(){p.value="zh-CN"===p.value?"en-US":"zh-CN",window.localStorage.setItem("locale",p.value)}a.commit("GET_IMPORT_COUNT");var j=Object(o["computed"])((function(){return a.getters.selectedList.length})),m=Object(o["computed"])((function(){return a.getters.textList.length})),h=Object(o["computed"])((function(){return a.getters.importCount}));function v(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(!e)return!1;i&&u.openExternal(e)}var g={blog:"https://evolly.one/",photo:"https://album.animalcrossing.life/",jike:"https://web.okjike.com/u/FFDB1E46-63DC-43BE-AA1A-36F3D9CD0017"};function x(e){i&&("update"===e?(l.on("asynchronous-reply",(function(e,t){console.log(t)})),l.send("update")):v(g[e]))}var k=null;return i&&(l.on("updateDownloading",function(){var e=Object(V["a"])(regeneratorRuntime.mark((function e(t,n){var c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("updateDownloaded"!==n){e.next=7;break}return k.close(),e.next=4,Object(o["nextTick"])();case 4:k=null,e.next=10;break;case 7:k||(k=B["a"].service({text:"正在下载... 0%",lock:!0,spinner:"el-icon-loading",background:"rgba(255, 255, 255, 1)"})),c=n.percent.toFixed(2),k.setText("正在下载... ".concat(c,"%"));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),l.on("updateDownloaded",(function(){})),l.on("updateNotAvailable",(function(e,t){console.log("updateNotAvailable",t)}))),function(e,t){var n=Object(o["resolveComponent"])("el-button"),c=Object(o["resolveComponent"])("el-tooltip"),r=Object(o["resolveComponent"])("el-dropdown-item"),a=Object(o["resolveComponent"])("el-dropdown-menu"),l=Object(o["resolveComponent"])("el-dropdown");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Se,[Object(o["createElementVNode"])("div",De,[Object(o["createVNode"])(c,{effect:"dark",placement:"left"},{content:Object(o["withCtx"])((function(){return[Le]})),default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(n,{type:"text",class:"mr-10",onClick:t[0]||(t[0]=function(e){return d(!0)})},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(Object(o["unref"])(b)("all")),1)]})),_:1})]})),_:1}),Be,Object(o["createElementVNode"])("span",Ae,Object(o["toDisplayString"])(Object(o["unref"])(j)),1),Ie,Object(o["createElementVNode"])("span",Ue,Object(o["toDisplayString"])(Object(o["unref"])(m)),1),Me,Object(o["createElementVNode"])("span",Pe,Object(o["toDisplayString"])(Object(o["unref"])(h))+" / 100",1),Re]),Object(o["createElementVNode"])("div",Fe,[Object(o["unref"])(i)?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{key:0,class:"thanks",onClick:t[1]||(t[1]=function(e){return v("https://mp.weixin.qq.com/s/o793lUsBaWc61fLZzFDlxg")})},Object(o["toDisplayString"])(Object(o["unref"])(b)("thanks")),1)):(Object(o["openBlock"])(),Object(o["createElementBlock"])("a",qe,Object(o["toDisplayString"])(Object(o["unref"])(b)("thanks")),1)),Object(o["createVNode"])(c,{effect:"dark",placement:"bottom",content:"导出 CSV 文件"},{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("div",{class:"export k-icon",onClick:s})]})),_:1}),Object(o["createVNode"])(c,{effect:"dark",placement:"bottom"},{content:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("div",ze,[Ze,He,Je,Xe,Ke,Object(o["unref"])(i)?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",We,"5. 在使用微信读书导入过程中请勿手动刷新页面，会导致获取不到笔记，如果刷新了，请退出应用后重新打开。")):Object(o["createCommentVNode"])("",!0),Ge,Ye])]})),default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("div",{class:"help k-icon",title:Object(o["unref"])(b)("help"),onClick:t[2]||(t[2]=function(){})},null,8,$e)]})),_:1}),Object(o["createVNode"])(c,{effect:"dark",placement:"bottom",content:"中/英文切换"},{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("div",{class:"translate k-icon",onClick:O})]})),_:1}),Object(o["createVNode"])(l,{onCommand:x},{dropdown:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(a,null,{default:Object(o["withCtx"])((function(){return[Object(o["unref"])(i)?(Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],{key:0},[Object(o["createVNode"])(r,{command:"update"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(Object(o["unref"])(b)("check-update")),1)]})),_:1}),Object(o["createVNode"])(r,{command:"blog"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(Object(o["unref"])(b)("blog")),1)]})),_:1}),Object(o["createVNode"])(r,{command:"photo"},{default:Object(o["withCtx"])((function(){return[et]})),_:1}),Object(o["createVNode"])(r,{command:"jike"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(Object(o["unref"])(b)("jike")),1)]})),_:1})],64)):(Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],{key:1},[Object(o["createVNode"])(r,null,{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("a",tt,Object(o["toDisplayString"])(Object(o["unref"])(b)("blog")),1)]})),_:1}),Object(o["createVNode"])(r,null,{default:Object(o["withCtx"])((function(){return[nt]})),_:1}),Object(o["createVNode"])(r,null,{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("a",ot,Object(o["toDisplayString"])(Object(o["unref"])(b)("jike")),1)]})),_:1})],64))]})),_:1})]})),default:Object(o["withCtx"])((function(){return[Qe]})),_:1})])])}}});n("d518");const rt=l()(ct,[["__scopeId","data-v-2a077942"]]);var at=rt,it=(n("a9e3"),{class:"top-bar"}),lt={class:"priview"},ut=["innerHTML"],st=Object(o["defineComponent"])({props:{info:{type:Object,default:function(){return{}}},index:{type:Number,default:0}},emits:["update:edit","update:check","update:input","open"],setup:function(e,t){var n=t.emit,c=e,r=(c.info,Object(o["toRef"])(c.info,"text"),Object(o["toRef"])(c.info,"checked")),a=Object(o["toRef"])(c.info,"isEdit");Object(o["toRef"])(c.info,"send"),Object(o["toRef"])(c.info,"isEmpty");Object(o["watch"])((function(){return c.info}),(function(e){var t=e.checked,n=e.text,o=e.isEdit;n,t=t,o=o})),Object(o["watch"])((function(){return a}),(function(e){n("update:edit",e)})),Object(o["watch"])((function(){return r}),(function(e){n("update:check",e.value)}),{deep:!0});var i=null,l=!1;function u(){i&&(l=!0,clearTimeout(i)),i=setTimeout((function(){l||(r.value=!r.value),clearTimeout(i),l=!1,i=null}),200)}return function(t,n){return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{class:Object(o["normalizeClass"])(["memo-card radius",{active:c.info.checked,empty:c.info.isEmpty,"text-highlight":c.info.send}]),onClick:u},[Object(o["createElementVNode"])("div",it,Object(o["toDisplayString"])(e.index+1),1),Object(o["createElementVNode"])("div",lt,[Object(o["createElementVNode"])("pre",{innerHTML:c.info.text},null,8,ut)])],2)}}});n("a963");const dt=l()(st,[["__scopeId","data-v-6093388b"]]);var ft=dt,bt={class:"content-box"},pt={class:"memo-box"},Ot=Object(o["createTextVNode"])("完成"),jt=Object(o["defineComponent"])({emits:["export"],setup:function(e,t){var n=t.emit,c=Object(J["b"])(),r=c.getters.isElectron;function a(){n("export")}var i=Object(o["computed"])((function(){var e=c.getters.textList;if(2===e.length){var t={text:"",note:"",isEdit:!1,checked:!1,isEmpty:!0};return[].concat(Object(d["a"])(e),[t])}return e})),l=Object(o["ref"])(!1),u=Object(o["ref"])({});function s(e){u.value=e,l.value=!0}function f(){u.value={},l.value=!1}return function(e,t){var n=Object(o["resolveComponent"])("el-input"),c=Object(o["resolveComponent"])("el-button"),d=Object(o["resolveComponent"])("el-dialog");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{class:Object(o["normalizeClass"])(["right-content",{electron:Object(o["unref"])(r)}])},[Object(o["createVNode"])(Object(o["unref"])(at),{class:Object(o["normalizeClass"])({"right-content-position":Object(o["unref"])(r)}),onExport:a},null,8,["class"]),Object(o["createElementVNode"])("div",bt,[Object(o["createElementVNode"])("div",pt,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(Object(o["unref"])(i),(function(e,t){return Object(o["openBlock"])(),Object(o["createBlock"])(Object(o["unref"])(ft),{onDblclick:Object(o["withModifiers"])((function(t){return s(e)}),["stop"]),key:e.text,class:"memo-item",input:e.text,"onUpdate:input":function(t){return e.text=t},check:e.checked,"onUpdate:check":function(t){return e.checked=t},edit:e.isEdit,"onUpdate:edit":function(t){return e.isEdit=t},info:e,index:t},null,8,["onDblclick","input","onUpdate:input","check","onUpdate:check","edit","onUpdate:edit","info","index"])})),128))])]),Object(o["createVNode"])(d,{modelValue:l.value,"onUpdate:modelValue":t[1]||(t[1]=function(e){return l.value=e}),center:"",width:"600px","show-close":!1,"close-on-click-modal":!1,"close-on-press-escape":!1},{footer:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(c,{onClick:f,size:"mini",type:"primary"},{default:Object(o["withCtx"])((function(){return[Ot]})),_:1})]})),default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(n,{modelValue:u.value.text,"onUpdate:modelValue":t[0]||(t[0]=function(e){return u.value.text=e}),type:"textarea",autosize:{minRows:16,maxRows:36},placeholder:"",clearable:""},null,8,["modelValue"])]})),_:1},8,["modelValue"])],2)}}});n("9460");const mt=l()(jt,[["__scopeId","data-v-4d4aef0a"]]);var ht=mt;function vt(e,t){var n={content:t};return I.a.post(e,n)}n("2b3d"),n("9861"),n("466d");var gt={setDataConver:function(e){var t=this.browser();if(!(t["ie"]<9)){var n,o=e["data"],c="undefined"===typeof e["showLabel"]||e["showLabel"],r=(e["fileName"]||"UserExport")+".csv",a=e["columns"]||{title:[],key:[],formatter:void 0},i=(c="undefined"===typeof c||c,""),l="";if(c){if(a.title.length)a.title.map((function(e){i+=e+","}));else for(n in o[0])i+=n+",";i=i.slice(0,-1),l+=i+"\r\n"}o.map((function(e){if(i="",a.key.length)a.key.map((function(t){i+='"'+("function"===typeof a.formatter&&a.formatter(t,e[t])||e[t])+'",'}));else for(n in e)i+='"'+("function"===typeof a.formatter&&a.formatter(n,e[n])||e[n])+'",';i.slice(0,i.length-1),l+=i+"\r\n"})),l&&this.SaveAs(r,l)}},SaveAs:function(e,t){var n=this.browser();if(n["edge"]&&n["ie"])if(n["ie"]>=10||"edge"==n["edge"]){var o="\ufeff",c=new Blob([o+t],{type:"text/csv"});navigator.msSaveBlob(c,e)}else{var r=window.top.open("about:blank","_blank");r.document.write("sep=,\r\n"+t),r.document.close(),r.document.execCommand("SaveAs",!0,e),r.close()}else{var a=document.createElement("a");a.id="linkDwnldLink",a.href=this.getDownloadUrl(t),document.body.appendChild(a);var i=document.getElementById("linkDwnldLink");i.setAttribute("download",e),i.click(),document.body.removeChild(i)}},getDownloadUrl:function(e){var t="\ufeff";if(window.Blob&&window.URL&&window.URL.createObjectURL){e=new Blob([t+e],{type:"text/csv"});return URL.createObjectURL(e)}},browser:function(){var e,t={},n=navigator.userAgent.toLowerCase();return(e=-1!==n.indexOf("edge")?t.edge="edge":n.match(/rv:([\d.]+)\) like gecko/))||(e=n.match(/msie ([\d.]+)/))?t.ie=e[1]:(e=n.match(/firefox\/([\d.]+)/))?t.firefox=e[1]:(e=n.match(/chrome\/([\d.]+)/))?t.chrome=e[1]:(e=n.match(/opera.([\d.]+)/))?t.opera=e[1]:(e=n.match(/version\/([\d.]+).*safari/))&&(t.safari=e[1]),t}},xt=["element-loading-text"],kt=Object(o["defineComponent"])({setup:function(e){var t=Object(J["b"])(),n=t.getters.isElectron,c=Object(o["computed"])((function(){return t.getters.importCount})),r=Object(o["computed"])((function(){return t.getters.selectedList})),a=Object(o["ref"])(""),i=Object(o["ref"])(!1),l=Object(o["ref"])(0),u=Object(o["computed"])((function(){return"为减轻服务器压力，导入间隔为 1s。导入进度： ".concat(l.value+1,"/").concat(r.value.length)}));function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";i.value=!0,l.value=0,f(e,r.value,l.value)}function f(e,n,o){var r=n[o];vt(e,r.text).then((function(a){t.commit("SET_IMPORT_COUNT",c.value+1),t.commit("SET_SUCCESS",r),o<n.length-1?setTimeout((function(){l.value+=1,f(e,n,l.value)}),1e3):(L["a"].success("导入完毕"),i.value=!1)})).catch((function(e){console.error(e),i.value=!1,L["a"].error("导入失败")}))}function b(e){t.commit("SET_TEXT_LIST",{options:e,tag:a.value})}function p(e){var n=e.list,o=e.options;t.commit("SET_TEMP_LIST",n),t.commit("SET_TEXT_LIST",{options:o,tag:a.value})}function O(e){a.value=e}var j=Object(o["ref"])(null);function m(){var e=j.value.exportCSV(),n=t.getters.textList.map((function(e){return e._text=e._text.replace(/\r/g,"").replace(/\n/g,""),e.note=e.note||"",e._tag=e._tag||"",e}));gt.setDataConver({data:n,fileName:e,columns:{title:["书摘","笔记","标签"],key:["_text","note","_tag"]}})}return function(e,t){var c=Object(o["resolveDirective"])("loading");return Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],null,[Object(o["unref"])(n)?(Object(o["openBlock"])(),Object(o["createBlock"])(Object(o["unref"])(s),{key:0,class:"the-head"})):Object(o["createCommentVNode"])("",!0),Object(o["withDirectives"])(Object(o["createElementVNode"])("div",{class:"content-wrap","element-loading-text":Object(o["unref"])(u)},[Object(o["createVNode"])(Object(o["unref"])(ye),{class:"left-bar",ref:function(e,t){t["leftContent"]=e,j.value=e},onSubmit:d,onParse:b,onListUpdate:p,onUpdateTag:O},null,512),Object(o["createVNode"])(Object(o["unref"])(ht),{class:"right-content",onExport:m})],8,xt),[[c,Object(o["unref"])(i)]])],64)}}});n("83fc");const Nt=kt;var wt=Nt,Et=n("1250"),Vt=(n("f930"),n("5893")),Ct={};function Tt(){var e={};return yt(Ct,e),e}function yt(e,t){for(var n in e)if(e[n].default){var o=n.substr(n.lastIndexOf("/")+1,5);t[o]?t[o]=Object(b["a"])(Object(b["a"])({},e[o]),e[n].default):t[o]=e[n].default}}Vt.keys().forEach((function(e){Ct[e]=Vt(e)}));var _t=window.localStorage.getItem("locale")||"zh-CN",St=Object(c["a"])({legacy:!1,locale:_t,messages:Tt()}),Dt=St,Lt=n("ade3");function Bt(e,t,n){var o=e.noTag,c=e.tagPosition,r=e.noEmptyLine,a=n;return o||(c?a="".concat(t,r?"\r\n":"\r\n\r\n")+a:a+=r?t:"\r\n".concat(t)),a}function At(e,t,n){var o=e.split,c=(e.tagPosition,e.notePosition),r=e.noEmptyLine,a=(e.noTag,JSON.parse(JSON.stringify(t)).map((function(t){var a="".concat(t.text,"\r\n"),i=t.note?"".concat(o).concat(o||r?"\r\n":""):"",l=t.note?[a,i,"".concat(t.note,"\r\n")]:[a,i];c&&l.reverse();var u=l.filter((function(e){return e})).join(r?"":"\r\n");return t._text=t.text,t._tag=n,t.text=Bt(e,n,u),t.send=!1,t})));return a}function It(){var e=new Date,t=e.getFullYear(),n=e.getMonth()+1,o=e.getDate();return"".concat(t).concat(n).concat(o)}var Ut=It(),Mt=Object(J["a"])({state:function(){return{activeBook:{},textList:[],tempList:[],importCount:0}},mutations:{SET_TEXT_LIST:function(e,t){var n=t.options,o=t.tag;e.textList=At(n,e.tempList,o)},SET_TEMP_LIST:function(e,t){e.tempList=t},GET_IMPORT_COUNT:function(e){var t=JSON.parse(localStorage.getItem("importCount")||"{}");e.importCount=+t[Ut]||0},SET_IMPORT_COUNT:function(e,t){e.importCount=t,localStorage.setItem("importCount",JSON.stringify(Object(Lt["a"])({},Ut,t)))},SET_SUCCESS:function(e,t){var n=e.textList.find((function(e){return e.text===t.text}));n.checked=!1,n.send=!0},SELECT_ALL:function(e,t){e.textList=e.textList.map((function(e){return e.checked=t,e}))}},getters:{textList:function(e){return e.textList},selectedList:function(e){return e.textList.filter((function(e){return e.checked}))},importDisabled:function(e,t){return t.selectedList.length>=100},importCount:function(e){return e.importCount},isElectron:function(){return!!Object({NODE_ENV:"production",BASE_URL:""}).IS_ELECTRON}}}),Pt=Mt,Rt=(n("9536"),Object(o["createApp"])(wt));Rt.use(Et["a"]),Rt.use(Dt),Rt.use(Pt),Rt.mount("#app");t["default"]=Rt},d518:function(e,t,n){"use strict";n("04b3")},e5ee:function(e,t,n){},f197:function(e,t,n){"use strict";n.r(t),t["default"]={parse:"Parse","how-export":"How to export HTML?","where-is--my-clippings":"Where is My Clippings.txt?",weread:"WeRead","parse-options":"Parse Options","hide-tag":"Hide Tag","position-of-tag":"Position Of Tag",top:"Top",bottom:"Bottom",on:"On",off:"OFF","book-name":"Book Name","book-list":"Book List",import:"Import","api-options":"Api Options","tag-options":"Tag Options","notes-options":"Notes Options","reading-notes":"reading","upload-file":"Upload HTML/TXT",thanks:"Thanks for lupeng",all:"All","check-update":"Check Update",blog:"Blog",jike:"JIKE",help:"Help"}},f930:function(e,t,n){},ff2a:function(e,t,n){}});